import 'package:flutter/foundation.dart';import 'package:http/http.dart';import 'dart:convert';/// 🌐 Service d';      debugPrint('[WebhookEmail] === ENVOI INVITATION VIA WEBHOOK ===';      debugPrint('[WebhookEmail] 📧 Destinataire: $email';      debugPrint('[WebhookEmail] 🔑 Code session: $sessionCode';      // Validation de l';        throw Exception('Format d\'email invalide: $email';      // Créer le contenu de l';        debugPrint('[WebhookEmail] ✅ Succès avec Formspree !';        debugPrint('[WebhookEmail] ✅ Succès avec Netlify !';        debugPrint('[WebhookEmail] ✅ Succès avec EmailJS public !';      debugPrint('[WebhookEmail] ❌ Tous les services ont échoué';      debugPrint('[WebhookEmail] ❌ Erreur envoi: $e';      debugPrint('[WebhookEmail] 🔄 Tentative API Email simple...';        Uri.parse('https://formspree.io/f/xanjoowd';          'Content-Type': 'application/json';          'Accept': 'application/json';          'email';          'subject': 'Invitation - Constat d\'accident collaboratif (Code: $sessionCode)';          'message';          '_replyto': 'hammami123rahma@gmail.com';          '_subject': 'Invitation Constat Collaboratif - Code: $sessionCode';      debugPrint('[WebhookEmail] API Email response: ${response.statusCode}';      debugPrint('[WebhookEmail] Response body: ${response.body}';      debugPrint('[WebhookEmail] ❌ Erreur API Email: $e';      debugPrint('[WebhookEmail] 🔄 Tentative Netlify...';        Uri.parse('https://constat-tunisie.netlify.app/';          'Content-Type': 'application/x-www-form-urlencoded';          'form-name': 'contact';          'email';          'subject': 'Invitation Constat - Code: $sessionCode';          'message';      debugPrint('[WebhookEmail] Netlify response: ${response.statusCode}';      debugPrint('[WebhookEmail] ❌ Erreur Netlify: $e';      debugPrint('[WebhookEmail] 🔄 Tentative EmailJS public...';        Uri.parse('https://api.emailjs.com/api/v1.0/email/send';          'Content-Type': 'application/json';          'service_id': 'service_hcur24e';          'template_id': 'template_g9xi3ce';          'user_id': 'IjxWFDFy9vM0bmTjZ';          'template_params';            'to_email';            'session_code';            'custom_message';            'from_name': 'Constat Tunisie';      debugPrint('[WebhookEmail] EmailJS public response: ${response.statusCode}';      debugPrint('[WebhookEmail] ❌ Erreur EmailJS public: $e';  /// 📝 Créer le contenu de l';    return ''';Vous êtes invité à rejoindre une session de constat d';1. Téléchargez l';${customMessage ?? 'Un conducteur vous invite à documenter un accident ensemble.';L';Email envoyé automatiquement par l';    ''';    return RegExp(r'^[^@]+@[^@]+\.[^@]+';