import 'package:flutter/foundation.dart';import 'package:http/http.dart';import 'dart:convert';/// ğŸŒ Service d';      debugPrint('[WebhookEmail] === ENVOI INVITATION VIA WEBHOOK ===';      debugPrint('[WebhookEmail] ğŸ“§ Destinataire: $email';      debugPrint('[WebhookEmail] ğŸ”‘ Code session: $sessionCode';      // Validation de l';        throw Exception('Format d\'email invalide: $email';      // CrÃ©er le contenu de l';        debugPrint('[WebhookEmail] âœ… SuccÃ¨s avec Formspree !';        debugPrint('[WebhookEmail] âœ… SuccÃ¨s avec Netlify !';        debugPrint('[WebhookEmail] âœ… SuccÃ¨s avec EmailJS public !';      debugPrint('[WebhookEmail] âŒ Tous les services ont Ã©chouÃ©';      debugPrint('[WebhookEmail] âŒ Erreur envoi: $e';      debugPrint('[WebhookEmail] ğŸ”„ Tentative API Email simple...';        Uri.parse('https://formspree.io/f/xanjoowd';          'Content-Type': 'application/json';          'Accept': 'application/json';          'email';          'subject': 'Invitation - Constat d\'accident collaboratif (Code: $sessionCode)';          'message';          '_replyto': 'hammami123rahma@gmail.com';          '_subject': 'Invitation Constat Collaboratif - Code: $sessionCode';      debugPrint('[WebhookEmail] API Email response: ${response.statusCode}';      debugPrint('[WebhookEmail] Response body: ${response.body}';      debugPrint('[WebhookEmail] âŒ Erreur API Email: $e';      debugPrint('[WebhookEmail] ğŸ”„ Tentative Netlify...';        Uri.parse('https://constat-tunisie.netlify.app/';          'Content-Type': 'application/x-www-form-urlencoded';          'form-name': 'contact';          'email';          'subject': 'Invitation Constat - Code: $sessionCode';          'message';      debugPrint('[WebhookEmail] Netlify response: ${response.statusCode}';      debugPrint('[WebhookEmail] âŒ Erreur Netlify: $e';      debugPrint('[WebhookEmail] ğŸ”„ Tentative EmailJS public...';        Uri.parse('https://api.emailjs.com/api/v1.0/email/send';          'Content-Type': 'application/json';          'service_id': 'service_hcur24e';          'template_id': 'template_g9xi3ce';          'user_id': 'IjxWFDFy9vM0bmTjZ';          'template_params';            'to_email';            'session_code';            'custom_message';            'from_name': 'Constat Tunisie';      debugPrint('[WebhookEmail] EmailJS public response: ${response.statusCode}';      debugPrint('[WebhookEmail] âŒ Erreur EmailJS public: $e';  /// ğŸ“ CrÃ©er le contenu de l';    return ''';Vous Ãªtes invitÃ© Ã  rejoindre une session de constat d';1. TÃ©lÃ©chargez l';${customMessage ?? 'Un conducteur vous invite Ã  documenter un accident ensemble.';L';Email envoyÃ© automatiquement par l';    ''';    return RegExp(r'^[^@]+@[^@]+\.[^@]+';