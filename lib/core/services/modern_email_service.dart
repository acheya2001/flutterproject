import 'package:flutter/foundation.dart';import 'package:http/http.dart';import 'dart:convert';import 'package:url_launcher/url_launcher.dart';/// ğŸš€ Service d';  // ğŸ“§ Configuration pour service d';  static const String _webhookUrl = 'https://hook.eu2.make.com/your-webhook-id';      debugPrint('[ModernEmail] === ENVOI INVITATION MODERNE ===';      debugPrint('[ModernEmail] ğŸ“§ Destinataire: $email';      debugPrint('[ModernEmail] ğŸ”‘ Code session: $sessionCode';      debugPrint('[ModernEmail] ğŸ†” ID session: $sessionId';      // Validation de l';        throw Exception('Format d\'email invalide: $email';      // CrÃ©er le contenu de l';      // 2. Tentative d';      // 3. Fallback : Ouvrir l';      debugPrint('[ModernEmail] âœ… Invitation traitÃ©e pour: $email';      debugPrint('[ModernEmail] âŒ Erreur: $e';  /// ğŸ“± Affiche le contenu de l';    debugPrint('[ModernEmail] ';    debugPrint('[ModernEmail] â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—';    debugPrint('[ModernEmail] â•‘                    ğŸ“§ EMAIL Ã€ ENVOYER                    â•‘';    debugPrint('[ModernEmail] â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£';    debugPrint('[ModernEmail] â•‘ ğŸ“§ DESTINATAIRE: $email';    debugPrint('[ModernEmail] â•‘ ğŸ“‹ SUJET: Invitation - Constat d\'accident collaboratif';    debugPrint('[ModernEmail] â•‘ ğŸ”‘ CODE SESSION: $sessionCode';    debugPrint('[ModernEmail] â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£';    debugPrint('[ModernEmail] â•‘ ğŸ“ MESSAGE:';    debugPrint('[ModernEmail] â•‘';    final lines = content.split('\n';      debugPrint('[ModernEmail] â•‘ $line';    debugPrint('[ModernEmail] â•‘';    debugPrint('[ModernEmail] â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•';    debugPrint('[ModernEmail] ';    debugPrint('[ModernEmail] ğŸ¯ ACTIONS POSSIBLES:';    debugPrint('[ModernEmail] 1. ğŸ“‹ COPIEZ le contenu ci-dessus';    debugPrint('[ModernEmail] 2. ğŸ“§ ENVOYEZ-LE Ã : $email';    debugPrint('[ModernEmail] 3. ğŸ”‘ PARTAGEZ le code: $sessionCode';    debugPrint('[ModernEmail] ';  /// ğŸš€ Tentative d';      debugPrint('[ModernEmail] ğŸš€ Tentative d\'envoi automatique...';        debugPrint('[ModernEmail] âœ… Email envoyÃ© automatiquement via webhook!';        debugPrint('[ModernEmail] âœ… Email envoyÃ© automatiquement via HTTP!';      debugPrint('[ModernEmail] âš ï¸ Envoi automatique non disponible';      debugPrint('[ModernEmail] âŒ Erreur envoi automatique: $e';      if (_webhookUrl.contains('your-webhook-id';        debugPrint('[ModernEmail] âš ï¸ Webhook non configurÃ© (URL par dÃ©faut)';        headers: {'Content-Type': 'application/json';          'to';          'subject': 'Invitation - Constat d\'accident collaboratif';          'message';          'session_code';          'from': 'Constat Tunisie App';      debugPrint('[ModernEmail] âŒ Erreur webhook: $e';        Uri.parse('https://httpbin.org/post';        headers: {'Content-Type': 'application/json';          'email_data';            'to';            'subject': 'Invitation Constat';            'message';            'code';        debugPrint('[ModernEmail] âœ… DonnÃ©es envoyÃ©es au service HTTP';        return false; // On retourne false car ce n'est pas un vrai envoi d';      debugPrint('[ModernEmail] âŒ Erreur HTTP: $e';  /// ğŸ“± Ouvre l';      debugPrint('[ModernEmail] ğŸ“± Tentative d\'ouverture de l\'app email...';      final subject = Uri.encodeComponent('Invitation - Constat d\'accident collaboratif';      final mailtoUrl = 'mailto:$email?subject=$subject&body=$body';        debugPrint('[ModernEmail] âœ… Application email ouverte';        debugPrint('[ModernEmail] âš ï¸ Impossible d\'ouvrir l\'app email';        debugPrint('[ModernEmail] ğŸ’¡ Utilisez le contenu affichÃ© dans les logs ci-dessus';      debugPrint('[ModernEmail] âŒ Erreur ouverture app email: $e';  /// ğŸ“ CrÃ©e le contenu de l'email d';    return ''';Vous avez Ã©tÃ© invitÃ©(e) Ã  participer Ã  un constat d'accident collaboratif via l';1. Ouvrez l';Si vous n'avez pas l';L';Code: $sessionCode''';    final emailRegex = RegExp(r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$';    final email = emailTest ?? 'hammami123rahma@gmail.com';    final sessionCode = 'TEST${DateTime.now().millisecondsSinceEpoch % 1000}';    final sessionId = 'test_${DateTime.now().millisecondsSinceEpoch}';    debugPrint('[ModernEmail] === TEST DU SERVICE ===';    debugPrint('[ModernEmail] Test ${success ? "rÃ©ussi" : "Ã©chouÃ©"}';