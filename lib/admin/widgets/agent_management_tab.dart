import 'package:flutter/material.dart';import '../../services/agent_management_service.dart';import '../../services/admin_compagnie_auth_service.dart';import '../../common/widgets/simple_credentials_dialog.dart';import ';        ScaffoldMessenger.of(context';          SnackBar(content: (e';          content: const Text('Creez d\')')'abord une agence avant d\';    ';    if (result != null && result[';      if (mounted';          title: '🎉 Admin Agence cree avec succes';            'nom': result['displayCredentials']['nom';            'email': result['displayCredentials']['email';            'password': result['displayCredentials']['password';            'agence': result['displayCredentials']['agence';            'role': ';    return _agents.where((agent') => agent[';                          ({_filteredAgents.length} admin(s') agence - ';                      icon: const Icon(Icons.info';                      label: const Text(';                                ..._agences.map((agence')')';                                  value: agence[';                                  child: const Text('Action';    ';  /// 👤 Carte d';    final stats = agent[';      (a') => a['id'] == agent[';      orElse: (') => {'nom': ';                const SizedBox(width: 12';                      ({agent['nom';                          const SizedBox(width: 8';                          const Text(';                          const SizedBox(width: 8')')';                          const Text(';                const SizedBox(width: 4')')';                Expanded(child: const Text(agent['email'] ?? ';                const SizedBox(width: 4';                const Text(agent['telephone'] ?? ';            const SizedBox(height: 12';                _buildStatChip('Constats', stats['total_constats]?.toString(') ?? ';                const SizedBox(width: 8';                _buildStatChip('Ce mois', stats['constats_ce_mois]?.toString(') ?? ';                const SizedBox(width: 8';                _buildStatChip('Score', stats['performance_score]?.toString(') ?? ';      ';      child: (value';            label: const Text(';    switch (action')')';      case ';        ScaffoldMessenger.of(context';          const SnackBar(content: const Text(';        ')')';      case ';        _resetAgentPassword(agent';      case ';  void _resetAgentPassword(Map<String, dynamic> agent';    final result = await AgentManagementService.resetAgentPassword(agent['id]';    if (result[';        builder: (context';          title: const Text('Mot de passe reinitialise')')';              ({agent['nom']}';              ({agent['email']}';              ({result['newPassword';              onPressed: () => Navigator.of(context).pop(';              child: const Text(';      builder: (context')')';        title: const Text('Desactiver l\')')'agent';        content: ({agent['nom';            onPressed: () => Navigator.of(context).pop(';            child: const Text(';              Navigator.of(context).pop(')')';              final result = await AgentManagementService.deactivateAgent(agent['id]';              if (result[';                  ScaffoldMessenger.of(context';                    const SnackBar(content: const Text(';            child: const Text('Action';    ')')';/// 🏗️ Dialog de creation d';      title: const Text(';                  items: widget.agences.map((agence')')';                    value: agence['id';                    child: const Text(agence[';                  validator: (value') => value == null ? ';                        validator: (value') => value?.isEmpty == true ? ';                        validator: (value') => value?.isEmpty == true ? ';                    if (value?.isEmpty == true') return 'Email requis';                    if (!RegExp(r^[\w-\.]+@([\w-]+\.')+[\w-]{2,4}').hasMatch(value!)';                      return ';                  validator: (value') => value?.isEmpty == true ? ';          onPressed: _isCreating ? null : () => Navigator.of(context).pop(';          child: const Text(';                ')')';              : const Text(';        cin: _cinController.text.trim(')')';        createdBy: ';        ScaffoldMessenger.of(context';          SnackBar(content: (e';  Widget build(BuildContext context';      title: const Text(';                  items: widget.agences.map((agence')')';                      value: agence['id';                      child: ({agence['ville';                  validator: (value') => value == null ? ';                        validator: (value') => value?.isEmpty == true ? ';                        validator: (value') => value?.isEmpty == true ? ';                    if (value?.isEmpty == true') return 'Email requis';                    if (!RegExp(r^[\w-\.]+@([\w-]+\.')+[\w-]{2,4}').hasMatch(value!)';                      return ';                  validator: (value') => value?.isEmpty == true ? ';          onPressed: _isCreating ? null : () => Navigator.of(context).pop(';          child: const Text(';                ')')';              : const Text(';        cin: _cinController.text.trim(')')';        createdBy: 'admin_compagnie', // TODO: Recuperer l';        ScaffoldMessenger.of(context';