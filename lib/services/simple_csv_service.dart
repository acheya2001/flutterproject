import 'package:cloud_firestore/cloud_firestore.dart';import 'package:flutter/foundation.dart';  static Future<SimpleCsvResult> importCsvData(String csvContent';      debugPrint(';      final lines = csvContent.trim(').split(';      if (lines.isEmpty';          errors: ['Fichier CSV vide';          dataType: ';        ';      final headers = lines[0].split(';      final dataRows = lines.skip(1).map((line') => line.split(',).toList(';      debugPrint('[SIMPLE_CSV] 📊 Headers: 'headers';      debugPrint('[SIMPLE_CSV] 📊 ';      final dataType = _detectDataType(headers';      debugPrint('[SIMPLE_CSV] 🔍 Type detecte: ';    } catch (e';      debugPrint('[SIMPLE_CSV] ❌ Erreur:  + e.toString()';        errors: ['Erreur: 'e';        dataType: ';  static String _detectDataType(List<String> headers';    final headerStr = headers.join(' ).toLowerCase(';    if (headerStr.contains('compagnie') || headerStr.contains('assurance)';      return 'compagnies';    if (headerStr.contains('agence)';      return 'agences';    if (headerStr.contains('agent') || (headerStr.contains('nom') && headerStr.contains('prenom)';      return 'agents';    if (headerStr.contains('vehicule') || headerStr.contains('immatriculation)';      return 'vehicules';    if (headerStr.contains('contrat') || headerStr.contains('police)';      return 'contrats';    if (headerStr.contains('sinistre') || headerStr.contains('accident)';      return 'sinistres';    return ';        final data = _mapRowToData(headers, row';        final docId = '${dataType}_${DateTime.now().millisecondsSinceEpoch}_'i';          'id';          'data_type';          'created_at: FieldValue.serverTimestamp(';          'imported_from': 'csv';          ';                .timeout(const Duration(seconds: 10)';            debugPrint('[SIMPLE_CSV] ✅ Sauvegarde dans: ';          } catch (e';            debugPrint(';          createdData.add(docData';          errors.add('Ligne ';      } catch (e';        errors.add(';    switch (dataType';      case 'compagnies';        return ['companies', 'compagnies_assurance', 'assurance_companies';      case 'agences';        return ['agencies', 'agences', 'insurance_agencies';      case 'agents';        return ['agents', 'insurance_agents', 'users';      case 'vehicules';        return ['vehicles', 'vehicules', 'cars';      case 'contrats';        return ['contracts', 'contrats', 'insurance_contracts';      case 'sinistres';        return ['claims', 'sinistres', 'accidents';        return ['csv_imports', 'imported_data', ';      final value = row[i]?.toString().trim(') ?? ';      if (value.isNotEmpty';  /// 🧪 Tester l';      'companies';      'agencies';      'agents';      'vehicles';      'contracts';      'claims';      'csv_imports';      'imported_data';      'users';      ';    for (String collection in testCollections';        final testDocId = 'test_{DateTime.now(').millisecondsSinceEpoch}';          'test';          ';            .timeout(const Duration(seconds: 5)';        debugPrint('[SIMPLE_CSV] ✅ Collection ';      } catch (e';        debugPrint('[SIMPLE_CSV] ❌ Collection $collection: INACCESSIBLE (e')';    switch (type';      case 'compagnies';        return ';Maghrebia Assurance,MAGHREBIA,Boulevard du 7 Novembre Sousse,73567890,info@maghrebia.tn,Sousse';      case 'agences';        return ';Agence Nabeul,GAT,Rue Farhat Hached,Nabeul,72666666,Sonia Khelifi';      case 'agents';        return ';Khelifi,Sonia,sonia.khelifi@gat.tn,72666666,Agence Nabeul,GAT';        return ';donnee1,donnee2,donnee3';