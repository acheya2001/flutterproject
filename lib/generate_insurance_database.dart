import 'package:flutter/material.dart';import 'package:firebase_core/firebase_core.dart';import 'package:cloud_firestore/cloud_firestore.dart';import 'package:firebase_auth/firebase_auth.dart';import 'dart:math';      title: 'G√©n√©rateur Base de Donn√©es Assurance';  String _status = '';    'STAR', 'GAT', 'BH', 'MAGHREBIA', 'LLOYD', 'COMAR', 'CTAMA', 'ZITOUNA';    'Tunis', 'Ariana', 'Ben Arous', 'Manouba', 'Nabeul', 'Zaghouan';    'Bizerte', 'B√©ja', 'Jendouba', 'Kef', 'Siliana', 'Sousse';    'Monastir', 'Mahdia', 'Sfax', 'Kairouan', 'Kasserine', 'Sidi Bouzid';    'Gab√®s', 'M√©denine', 'Tataouine', 'Gafsa', 'Tozeur', 'K√©bili';    'Peugeot', 'Renault', 'Citro√´n', 'Volkswagen', 'Ford', 'Opel';    'Fiat', 'Seat', 'Skoda', 'Hyundai', 'Kia', 'Toyota', 'Nissan';    'Dacia', 'Suzuki', 'Mitsubishi', 'Mazda', 'Honda', 'Chevrolet';    '206', '207', '208', '307', '308', '407', '508', 'Clio', 'Megane';    'Logan', 'Sandero', 'Symbol', 'C3', 'C4', 'Berlingo', 'Golf';    'Polo', 'Passat', 'Fiesta', 'Focus', 'Mondeo', 'Corsa', 'Astra';    'Punto', 'Panda', 'Ibiza', 'Leon', 'Fabia', 'Octavia', 'i10';    'i20', 'i30', 'Accent', 'Elantra', 'Picanto', 'Rio', 'Cerato';    'Yaris', 'Corolla', 'Auris', 'Micra', 'Note', 'Qashqai';    'Ahmed', 'Mohamed', 'Ali', 'Mahmoud', 'Omar', 'Youssef', 'Karim';    'Sami', 'Rami', 'Nabil', 'Farid', 'Tarek', 'Walid', 'Hichem';    'Amine', 'Fares', 'Marwan', 'Aymen', 'Bilel', 'Chokri';    'Fatma', 'Aicha', 'Khadija', 'Amina', 'Salma', 'Nour', 'Ines';    'Sarra', 'Rim', 'Dorra', 'Emna', 'Olfa', 'Wafa', 'Samia';    'Leila', 'Monia', 'Sonia', 'Rania', 'Meriem', 'Asma';    'Ben Ali', 'Trabelsi', 'Bouazizi', 'Chaieb', 'Dridi', 'Gharbi';    'Jemli', 'Karray', 'Lassoued', 'Maaloul', 'Nasri', 'Ouali';    'Riahi', 'Saidi', 'Tlili', 'Zouari', 'Abidi', 'Belhaj';    'Chaabane', 'Derbali', 'Essid', 'Ferjani', 'Ghanmi', 'Hamdi';    'Jebali', 'Kacem', 'Labidi', 'Mahfoudh', 'Nouri', 'Oueslati';        title: Text('G√©n√©rateur Base de Donn√©es Assurance';                      'G√©n√©ration de Base de Donn√©es';                      'Ce script va g√©n√©rer:\n';                      '‚Ä¢ 8 compagnies d\'assurance\n';                      '‚Ä¢ 24 gouvernorats avec agences\n';                      '‚Ä¢ 200+ agents d\'assurance\n';                      '‚Ä¢ 5000+ contrats de v√©hicules\n';                      '‚Ä¢ 1000+ conducteurs';              child: Text(_isGenerating ? 'G√©n√©ration en cours...' : 'G√©n√©rer Base de Donn√©es';                'Progression: $_progress / $_total';                    style: TextStyle(fontFamily: 'monospace';      _status += '${DateTime.now().toString().substring(11, 19)} - $message\n';      _status = '';      _updateStatus('üöÄ D√©but de la g√©n√©ration de la base de donn√©es...';      // 1. G√©n√©rer les compagnies d';      // 3. G√©n√©rer les agents d';      _updateStatus('‚úÖ G√©n√©ration termin√©e avec succ√®s !';      _updateStatus('üìä Base de donn√©es cr√©√©e avec ${_progress} √©l√©ments';      _updateStatus('‚ùå Erreur: $e';    _updateStatus('üìã G√©n√©ration des compagnies d\'assurance...';      await _firestore.collection('insurance_companies';        'code';        'nom';        'nom_complet';        'adresse_siege': 'Avenue Habib Bourguiba, Tunis';        'telephone': '+216 71 ${Random().nextInt(900000) + 100000}';        'email': '${compagnie.toLowerCase()}@assurance.tn';        'site_web': 'www.${compagnie.toLowerCase()}.com.tn';        'date_creation';        'statut': 'active';        'logo_url': 'https://example.com/logos/${compagnie.toLowerCase()}.png';      _updateStatus('‚úÖ Compagnie $compagnie cr√©√©e';      case 'STAR': return 'Soci√©t√© Tunisienne d\'Assurance et de R√©assurance';      case 'GAT': return 'Groupe Assurances Tunis';      case 'BH': return 'BH Assurance';      case 'MAGHREBIA': return 'Compagnie d\'Assurance Maghrebia';      case 'LLOYD': return 'Lloyd Tunisien';      case 'COMAR': return 'Compagnie M√©diterran√©enne d\'Assurance et de R√©assurance';      case 'CTAMA': return 'Compagnie Tuniso-Arabe d\'Assurance Maritime et d\'Aviation';      case 'ZITOUNA': return 'Zitouna Takaful';    _updateStatus('üè¢ G√©n√©ration des agences par gouvernorat...';          String agenceId = '${compagnie.toLowerCase()}_${gouvernorat.toLowerCase()}_agence$i';          await _firestore.collection('agences';            'id';            'nom': 'Agence $compagnie $gouvernorat $i';            'compagnie';            'gouvernorat';            'adresse': '${Random().nextInt(200) + 1} Avenue ${_getRandomStreet()}, $gouvernorat';            'telephone': '+216 ${_getGouvernoratCode(gouvernorat)} ${Random().nextInt(900000) + 100000}';            'email': 'agence$i.${gouvernorat.toLowerCase()}@${compagnie.toLowerCase()}.tn';            'responsable': '${prenoms[Random().nextInt(prenoms.length)]} ${noms[Random().nextInt(noms.length)]}';            'date_ouverture';            'statut': 'active';            'horaires';              'lundi_vendredi': '08:00-17:00';              'samedi': '08:00-12:00';              'dimanche': 'ferm√©';    _updateStatus('‚úÖ Agences cr√©√©es pour tous les gouvernorats';      'Habib Bourguiba', 'de la R√©publique', 'de l\'Ind√©pendance', 'du 20 Mars';      'Farhat Hached', 'Mongi Slim', 'de la Libert√©', 'des Martyrs';      'H√©di Chaker', 'Tahar Sfar', 'de Carthage', 'du 9 Avril';      'Tunis': '71', 'Ariana': '71', 'Ben Arous': '71', 'Manouba': '71';      'Nabeul': '72', 'Zaghouan': '72', 'Bizerte': '72', 'B√©ja': '78';      'Jendouba': '78', 'Kef': '78', 'Siliana': '78', 'Sousse': '73';      'Monastir': '73', 'Mahdia': '73', 'Sfax': '74', 'Kairouan': '77';      'Kasserine': '77', 'Sidi Bouzid': '76', 'Gab√®s': '75', 'M√©denine': '75';      'Tataouine': '75', 'Gafsa': '76', 'Tozeur': '76', 'K√©bili': '76';    return codes[gouvernorat] ?? '71';    _updateStatus('üë• G√©n√©ration des agents d\'assurance...';    QuerySnapshot agencesSnapshot = await _firestore.collection('agences';        String email = '${prenom.toLowerCase()}.${nom.toLowerCase().replaceAll(' ', '')}@${agenceData['compagnie'].toString().toLowerCase()}.tn';        // Cr√©er l';        String userId = _firestore.collection('users';        await _firestore.collection('users';          'uid';          'email';          'nom';          'prenom';          'telephone': '+216 ${Random().nextInt(90000000) + 10000000}';          'date_naissance';          'adresse': '${Random().nextInt(100) + 1} Rue ${_getRandomStreet()}, ${agenceData['gouvernorat']}';          'cin': '${Random().nextInt(90000000) + 10000000}';          'date_creation';          'statut': 'actif';          'role': 'assureur';          'compagnie': agenceData['compagnie';          'agence': agenceData['id';          'gouvernorat': agenceData['gouvernorat';        // Cr√©er le type d';        await _firestore.collection('user_types';          'type': 'assureur';          'userId';        // Cr√©er l';        await _firestore.collection('assureurs';          'userId';          'email';          'nom';          'prenom';          'compagnie': agenceData['compagnie';          'agence': agenceData['id';          'gouvernorat': agenceData['gouvernorat';          'poste';          'date_embauche';          'salaire';          'commission';          'objectif_mensuel';          'statut': 'actif';    _updateStatus('‚úÖ Agents d\'assurance cr√©√©s';      'Agent Commercial', 'Conseiller Client√®le', 'Charg√© de Client√®le';      'Agent de Souscription', 'Responsable Agence', 'Superviseur';    _updateStatus('üöó G√©n√©ration des conducteurs...';      String email = '${prenom.toLowerCase()}.${nom.toLowerCase().replaceAll(' ', '')}$i@gmail.com';      String userId = _firestore.collection('users';      // Cr√©er l';      await _firestore.collection('users';        'uid';        'email';        'nom';        'prenom';        'telephone': '+216 ${Random().nextInt(90000000) + 10000000}';        'date_naissance';        'adresse': '${Random().nextInt(200) + 1} ${_getRandomStreet()}, ${gouvernorats[Random().nextInt(gouvernorats.length)]}';        'cin': '${Random().nextInt(90000000) + 10000000}';        'date_creation';        'statut': 'actif';        'role': 'conducteur';      // Cr√©er le type d';      await _firestore.collection('user_types';        'type': 'conducteur';        'userId';      // Cr√©er l';      await _firestore.collection('conducteurs';        'userId';        'email';        'nom';        'prenom';        'date_naissance';        'lieu_naissance';        'cin': '${Random().nextInt(90000000) + 10000000}';        'adresse': '${Random().nextInt(200) + 1} ${_getRandomStreet()}, ${gouvernorats[Random().nextInt(gouvernorats.length)]}';        'telephone': '+216 ${Random().nextInt(90000000) + 10000000}';        'profession';        'permis_numero': 'P${Random().nextInt(9000000) + 1000000}';        'permis_date_obtention';        'permis_categorie';        'date_creation';        'statut': 'actif';        _updateStatus('‚úÖ $i conducteurs cr√©√©s';    _updateStatus('‚úÖ 1000 conducteurs cr√©√©s';      'Ing√©nieur', 'M√©decin', 'Enseignant', 'Comptable', 'Avocat', 'Pharmacien';      'Architecte', 'Dentiste', 'Infirmier', 'Technicien', 'Commercial', 'Fonctionnaire';      'Entrepreneur', 'Consultant', 'Journaliste', 'Traducteur', 'Designer', 'D√©veloppeur';      'M√©canicien', '√âlectricien', 'Plombier', 'Ma√ßon', 'Chauffeur', 'Vendeur';      'Cuisinier', 'Serveur', 'Coiffeur', 'Esth√©ticienne', 'Photographe', 'Musicien';    List<String> categories = ['B', 'A', 'A1', 'C', 'D', 'BE', 'CE';    _updateStatus('üìÑ G√©n√©ration des contrats de v√©hicules...';    QuerySnapshot agentsSnapshot = await _firestore.collection('assureurs';    QuerySnapshot conducteursSnapshot = await _firestore.collection('conducteurs';      String contractId = _firestore.collection('contracts';      await _firestore.collection('contracts';        'id';        'numero_contrat': 'C${agentData['compagnie']}${DateTime.now().year}${i.toString().padLeft(6, '0')}';        'compagnie';          'code': agentData['compagnie';          'nom': _getCompagnieNomComplet(agentData['compagnie';        'agence';          'id': agentData['agence';          'gouvernorat': agentData['gouvernorat';        'agent';          'id';          'nom': agentData['nom';          'prenom': agentData['prenom';          'email': agentData['email';        'conducteur';          'id';          'nom': conducteurData['nom';          'prenom': conducteurData['prenom';          'cin': conducteurData['cin';          'telephone': conducteurData['telephone';          'adresse': conducteurData['adresse';        'vehicule';          'marque';          'modele';          'annee';          'immatriculation';          'numero_chassis';          'couleur';          'carburant';          'puissance';          'nombre_places';          'usage';        'assurance';          'type_couverture';          'date_debut';          'date_fin';          'prime_annuelle';          'franchise';          'bonus_malus';        'date_creation';        'statut': 'actif';        'createdBy';        'conducteurId';        _updateStatus('‚úÖ $i contrats cr√©√©s';    _updateStatus('‚úÖ 5000 contrats cr√©√©s';    List<String> letters = ['TUN', 'TUS', 'TUG', 'TUB', 'TUA', 'TUZ', 'TUJ', 'TUK';    return '$num1 $letter $num2';    String chars = 'ABCDEFGHJKLMNPRSTUVWXYZ1234567890';    String chassis = '';      'Blanc', 'Noir', 'Gris', 'Rouge', 'Bleu', 'Vert', 'Jaune', 'Orange';      'Violet', 'Marron', 'Beige', 'Argent', 'Bordeaux', 'Rose';    List<String> carburants = ['Essence', 'Diesel', 'GPL', 'Hybride', '√âlectrique';    List<String> usages = ['Personnel', 'Professionnel', 'Taxi', 'Location', 'Transport';      'Responsabilit√© Civile', 'Tous Risques', 'Tiers Collision';      'Tiers √âtendu', 'Vol et Incendie';