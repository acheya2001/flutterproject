import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import '../../../core/widgets/custom_app_bar.dart';import '../../../features/auth/providers/auth_provider.dart';import '../../vehicules/models/vehicule_assure_model.dart';import '../../vehicules/services/vehicule_assure_service.dart';import '../../vehicules/widgets/contract_verification_dialog.dart';import '../../vehicules/widgets/vehicle_card.dart';  String _searchQuery = '';            content: Text('Erreur lors du chargement: $e';        title: 'Vérification Véhicules';            tooltip: 'Vérifier un contrat';        label: const Text('Vérifier';                      'Assureur: ${user?.prenom} ${user?.nom}';                      'Vérification et gestion des contrats';          hintText: 'Rechercher par immatriculation, contrat, marque...';          Expanded(child: _buildStatCard('Total';          Expanded(child: _buildStatCard('Actifs';          Expanded(child: _buildStatCard('Expirés';                ? 'Aucun véhicule trouvé';                : 'Aucun véhicule enregistré';                ? 'Essayez avec d\'autres termes de recherche';                : 'Les véhicules assurés apparaîtront ici';            'Chargement des véhicules...';                              '${vehicle.vehicule.marque} ${vehicle.vehicule.modele}';                          vehicle.isContratActif ? 'Actif' : 'Expiré';                  _buildDetailSection('Contrat d\'assurance';                    _buildDetailRow('Numéro';                    _buildDetailRow('Assureur';                    _buildDetailRow('Type';                    _buildDetailRow('Début';                    _buildDetailRow('Fin';                    _buildDetailRow('Prime annuelle', '${vehicle.contrat.primeAnnuelle.toStringAsFixed(0)} TND';                  _buildDetailSection('Propriétaire';                    _buildDetailRow('Nom', '${vehicle.proprietaire.prenom} ${vehicle.proprietaire.nom}';                    _buildDetailRow('CIN';                    _buildDetailRow('Téléphone';                  _buildDetailSection('Véhicule';                    _buildDetailRow('Marque';                    _buildDetailRow('Modèle';                    _buildDetailRow('Année';                    _buildDetailRow('Couleur';                    _buildDetailRow('Châssis';                    _buildDetailRow('Puissance', '${vehicle.vehicule.puissanceFiscale} CV';          const Text(': ';      case 'STAR';        return 'STAR Assurances';      case 'MAGHREBIA';        return 'Maghrebia Assurances';      case 'GAT';        return 'GAT Assurances';      case 'LLOYD';        return 'Lloyd Tunisien';      case 'AST';        return 'Assurances Salim';    return '${date.day.toString().padLeft(2, '0')}/${date.month.toString().padLeft(2, '0')}/${date.year}';