import 'package:cloud_firestore/cloud_firestore.dart';import 'package:flutter/foundation.dart';import '../models/vehicule_conducteur_liaison_model.dart';import '../models/vehicule_assure_model.dart';import '../../auth/models/user_model.dart';/// ğŸ”— Service d';      debugPrint('ğŸ”— Affectation vÃ©hicule: $vehiculeId â†’ $conducteurEmail';          .collection('vehicules_assures';        throw Exception('VÃ©hicule non trouvÃ©: $vehiculeId';      // VÃ©rifier s';          .collection('vehicules_conducteurs_liaisons';          .where('vehicule_id';          .where('statut', isEqualTo: 'actif';          'statut': 'annule';          'updatedAt';      final liaisonId = _firestore.collection('vehicules_conducteurs_liaisons';        _firestore.collection('vehicules_conducteurs_liaisons';      debugPrint('âœ… VÃ©hicule affectÃ© avec succÃ¨s';      debugPrint('âŒ Erreur affectation vÃ©hicule: $e';  /// ğŸ“§ Envoyer notification d';      // TODO: ImplÃ©menter l'envoi d';      debugPrint('ğŸ“§ Notification envoyÃ©e Ã : ${liaison.conducteurEmail}';          .collection('vehicules_conducteurs_liaisons';        'notification_envoyee';        'date_notification';      debugPrint('âŒ Erreur envoi notification: $e';  /// ğŸ“‹ Obtenir les vÃ©hicules d';      debugPrint('ğŸ“‹ RÃ©cupÃ©ration vÃ©hicules pour: $conducteurEmail';          .collection('vehicules_conducteurs_liaisons';          .where('conducteur_email';          .where('statut', isEqualTo: 'actif';        debugPrint('â„¹ï¸ Aucun vÃ©hicule affectÃ© Ã  ce conducteur';            .collection('vehicules_assures';      debugPrint('âœ… ${vehicules.length} vÃ©hicules trouvÃ©s';      debugPrint('âŒ Erreur rÃ©cupÃ©ration vÃ©hicules conducteur: $e';  /// ğŸ” Obtenir les liaisons d';          .collection('vehicules_conducteurs_liaisons';          .where('agent_affecteur';          .orderBy('createdAt';      debugPrint('âŒ Erreur rÃ©cupÃ©ration liaisons agent: $e';  /// ğŸ”„ Modifier le statut d';          .collection('vehicules_conducteurs_liaisons';        'statut';        'updatedAt';      debugPrint('âœ… Statut liaison modifiÃ©: $liaisonId â†’ ${nouveauStatut.name}';      debugPrint('âŒ Erreur modification statut liaison: $e';  /// ğŸ”‘ Modifier les droits d';          .collection('vehicules_conducteurs_liaisons';        'droits';        'updatedAt';      debugPrint('âœ… Droits liaison modifiÃ©s: $liaisonId';      debugPrint('âŒ Erreur modification droits liaison: $e';  /// ğŸ“Š Obtenir les statistiques d';          .collection('vehicules_conducteurs_liaisons';          .where('agent_affecteur';        'total_affectations';        'affectations_actives';        'affectations_expirees';        'affectations_suspendues';        'taux_activite';      debugPrint('âŒ Erreur statistiques affectation: $e';          .collection('vehicules_conducteurs_liaisons';          .where('conducteur_email';          .where('vehicule_id';          .where('statut', isEqualTo: 'actif';      // VÃ©rifier l';      debugPrint('âŒ Erreur vÃ©rification droit vÃ©hicule: $e';      debugPrint('ğŸ”„ Synchronisation des liaisons...';          .collection('vehicules_conducteurs_liaisons';          .where('conducteur_id';            .collection('users';            .where('email';            .where('type', isEqualTo: 'conducteur';            'conducteur_id';            'updatedAt';        debugPrint('âœ… $synchronized liaisons synchronisÃ©es';        debugPrint('â„¹ï¸ Aucune liaison Ã  synchroniser';      debugPrint('âŒ Erreur synchronisation liaisons: $e';