import 'dart:io';import 'dart:async';import 'dart:convert';import 'package:cloud_firestore/cloud_firestore.dart';import 'package:firebase_storage/firebase_storage.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:flutter/foundation.dart';import 'package:path/path.dart';import 'package:image/image.dart';import 'package:shared_preferences/shared_preferences.dart';import '../models/vehicule_model.dart';import '../../../utils/connectivity_utils.dart';  // Variable pour suivre l';    debugPrint('[VehiculeService] Annulation des op√©rations en cours';  // R√©initialiser l'√©tat d';  // R√©cup√©rer tous les v√©hicules d';      debugPrint('[VehiculeService] R√©cup√©ration des v√©hicules pour le propri√©taire: $proprietaireId';          .collection('vehicules';          .where('proprietaireId';            throw TimeoutException('La r√©cup√©ration des v√©hicules a pris trop de temps. Veuillez v√©rifier votre connexion internet.';      debugPrint('[VehiculeService] ${vehicules.length} v√©hicules r√©cup√©r√©s';      debugPrint('[VehiculeService] Erreur lors de la r√©cup√©ration des v√©hicules: $e';      // En cas d';        debugPrint('[VehiculeService] Erreur lors de la r√©cup√©ration du cache: $cacheError';      // Essayer d';        debugPrint('[VehiculeService] V√©hicule r√©cup√©r√© du cache: $vehiculeId';      final doc = await _firestore.collection('vehicules';        debugPrint('[VehiculeService] V√©hicule non trouv√©: $vehiculeId';      debugPrint('[VehiculeService] V√©hicule r√©cup√©r√©: $vehiculeId';      debugPrint('[VehiculeService] Erreur lors de la r√©cup√©ration du v√©hicule: $e';        if (map['createdAt';          map['createdAt'] = (map['createdAt';        if (map['updatedAt';          map['updatedAt'] = (map['updatedAt';        if (map['dateDebutValidite';          map['dateDebutValidite'] = (map['dateDebutValidite';        if (map['dateFinValidite';          map['dateFinValidite'] = (map['dateFinValidite';      await prefs.setString('vehicules_$proprietaireId';      debugPrint('[VehiculeService] V√©hicules mis en cache pour: $proprietaireId';      debugPrint('[VehiculeService] Erreur lors de la mise en cache des v√©hicules: $e';    final vehiculesJson = prefs.getString('vehicules_$proprietaireId';      debugPrint('[VehiculeService] Aucun v√©hicule en cache pour: $proprietaireId';        if (data['createdAt';          data['createdAt'] = DateTime.parse(data['createdAt';        if (data['updatedAt';          data['updatedAt'] = DateTime.parse(data['updatedAt';        if (data['dateDebutValidite';          data['dateDebutValidite'] = DateTime.parse(data['dateDebutValidite';        if (data['dateFinValidite';          data['dateFinValidite'] = DateTime.parse(data['dateFinValidite';      debugPrint('[VehiculeService] ${vehicules.length} v√©hicules r√©cup√©r√©s du cache';      debugPrint('[VehiculeService] Erreur lors de la lecture du cache: $e';        debugPrint('[VehiculeService] Impossible de mettre en cache un v√©hicule sans ID';      if (vehiculeMap['createdAt';        vehiculeMap['createdAt'] = (vehiculeMap['createdAt';      if (vehiculeMap['updatedAt';        vehiculeMap['updatedAt'] = (vehiculeMap['updatedAt';      if (vehiculeMap['dateDebutValidite';        vehiculeMap['dateDebutValidite'] = (vehiculeMap['dateDebutValidite';      if (vehiculeMap['dateFinValidite';        vehiculeMap['dateFinValidite'] = (vehiculeMap['dateFinValidite';      await prefs.setString('vehicule_${vehicule.id}';      debugPrint('[VehiculeService] V√©hicule mis en cache: ${vehicule.id}';      debugPrint('[VehiculeService] Erreur lors de la mise en cache du v√©hicule: $e';    final vehiculeJson = prefs.getString('vehicule_$vehiculeId';      debugPrint('[VehiculeService] V√©hicule non trouv√© dans le cache: $vehiculeId';      if (decodedJson['createdAt';        decodedJson['createdAt'] = DateTime.parse(decodedJson['createdAt';      if (decodedJson['updatedAt';        decodedJson['updatedAt'] = DateTime.parse(decodedJson['updatedAt';      if (decodedJson['dateDebutValidite';        decodedJson['dateDebutValidite'] = DateTime.parse(decodedJson['dateDebutValidite';      if (decodedJson['dateFinValidite';        decodedJson['dateFinValidite'] = DateTime.parse(decodedJson['dateFinValidite';      debugPrint('[VehiculeService] V√©hicule r√©cup√©r√© du cache: $vehiculeId';      debugPrint('[VehiculeService] Erreur lors de la lecture du cache: $e';      debugPrint('[VehiculeService] Compression de l\'image: ${imageFile.path}';      // V√©rifier la taille de l';      debugPrint('[VehiculeService] Taille originale de l\'image: ${fileSize ~/ 1024} KB';        debugPrint('[VehiculeService] Image tr√®s volumineuse, compression extr√™me appliqu√©e';        debugPrint('[VehiculeService] Image volumineuse, compression tr√®s agressive appliqu√©e';      // Lire l';        debugPrint('[VehiculeService] Impossible de d√©coder l\'image';        throw Exception('Format d\'image non support√© ou image corrompue';      // Redimensionner l';      // Si l';      // Redimensionner l';      // Compresser l';      // Cr√©er un fichier temporaire pour l';      final tempFile = File('${tempDir.path}/compressed_${path.basename(imageFile.path)}';      debugPrint('[VehiculeService] Image compress√©e: ${tempFile.path}';      debugPrint('[VehiculeService] Taille originale: ${fileSize ~/ 1024} KB, taille compress√©e: ${compressedSize ~/ 1024} KB';      debugPrint('[VehiculeService] Erreur lors de la compression de l\'image: $e';      // En cas d';        debugPrint('[VehiculeService] Tentative de compression simple';        // Lire l';          final tempFile = File('${tempDir.path}/emergency_compressed_${path.basename(imageFile.path)}';        debugPrint('[VehiculeService] Erreur lors de la compression simple: $innerError';      debugPrint('[VehiculeService] üöÄ D√âBUT t√©l√©chargement direct: ${imageFile.path}';      debugPrint('[VehiculeService] üìÇ Chemin de stockage: $storagePath';        debugPrint('[VehiculeService] ‚ùå Le fichier n\'existe pas: ${imageFile.path}';        throw Exception('Le fichier image n\'existe pas';      debugPrint('[VehiculeService] ‚úÖ Fichier existe';      // V√©rifier l';      debugPrint('[VehiculeService] üîÑ V√©rification Firebase Storage...';        final testRef = storage.ref().child('test_connection';          onTimeout: () => throw TimeoutException('Test connexion timeout';        debugPrint('[VehiculeService] ‚ö†Ô∏è Test connexion Firebase: $e';        // Continuer quand m√™me, l';      final fileName = '${DateTime.now().millisecondsSinceEpoch}_${path.basename(imageFile.path)}';      final fullPath = '$storagePath/$fileName';      debugPrint('[VehiculeService] üìÅ Chemin complet Firebase: $fullPath';      debugPrint('[VehiculeService] üìä Taille du fichier: ${fileSize ~/ 1024} KB';        debugPrint('[VehiculeService] Fichier tr√®s volumineux, compression simple';            final tempFile = File('${tempDir.path}/resized_${path.basename(imageFile.path)}';            debugPrint('[VehiculeService] Image redimensionn√©e: ${compressedBytes.length ~/ 1024} KB';          debugPrint('[VehiculeService] Erreur compression simple: $e, utilisation fichier original';      debugPrint('[VehiculeService] üì§ D√âBUT t√©l√©chargement vers Firebase Storage';      debugPrint('[VehiculeService] üìÅ Fichier √† t√©l√©charger: ${finalFile.path}';      debugPrint('[VehiculeService] üìä Bytes lus: ${bytes.length}';          debugPrint('[VehiculeService] üìä Progression: ${(progress * 100).toStringAsFixed(1)}% (${snapshot.bytesTransferred}/${snapshot.totalBytes} bytes)';          debugPrint('[VehiculeService] ‚ö†Ô∏è Taille totale inconnue';        // V√©rifier l';          debugPrint('[VehiculeService] ‚ùå Annulation du t√©l√©chargement demand√©e';          debugPrint('[VehiculeService] Timeout du t√©l√©chargement atteint';          throw TimeoutException('Le t√©l√©chargement a pris trop de temps. V√©rifiez votre connexion internet.';      // Obtenir l';      debugPrint('[VehiculeService] ‚úÖ T√©l√©chargement r√©ussi: $downloadUrl';      debugPrint('[VehiculeService] ‚ùå Erreur t√©l√©chargement: $e';      // Si c';      if (e.toString().contains('channel-error') || e.toString().contains('Unable to establish connection';        debugPrint('[VehiculeService] üîÑ Erreur de canal d√©tect√©e, tentative avec m√©thode alternative...';      if (e.toString().contains('permission') || e.toString().contains('denied';        throw Exception('Erreur d\'autorisation Firebase Storage. V√©rifiez les r√®gles de s√©curit√©.';        throw TimeoutException('Le t√©l√©chargement a pris trop de temps. V√©rifiez votre connexion internet.';      debugPrint('[VehiculeService] üîÑ M√âTHODE ALTERNATIVE de t√©l√©chargement';      final fileName = 'alt_${DateTime.now().millisecondsSinceEpoch}_${path.basename(imageFile.path)}';      final fullPath = '$storagePath/$fileName';      debugPrint('[VehiculeService] üìÅ Chemin alternatif: $fullPath';      debugPrint('[VehiculeService] üìä Taille bytes: ${bytes.length}';        contentType: 'image/jpeg';          'uploadedBy': 'constat_tunisie_app';          'timestamp';      debugPrint('[VehiculeService] üì§ D√©but t√©l√©chargement alternatif...';          debugPrint('[VehiculeService] üìä Progression alternative: ${(progress * 100).toStringAsFixed(1)}%';          throw TimeoutException('Timeout m√©thode alternative';      // Obtenir l';      debugPrint('[VehiculeService] ‚úÖ T√©l√©chargement alternatif r√©ussi: $downloadUrl';      debugPrint('[VehiculeService] ‚ùå Erreur m√©thode alternative: $e';      throw Exception('Impossible de t√©l√©charger l\'image. V√©rifiez votre connexion internet et r√©essayez.';      // V√©rifier d';        debugPrint('[VehiculeService] Pas de connexion Internet';      // V√©rifier l';        debugPrint('[VehiculeService] Utilisateur non authentifi√©';      final testQuery = await _firestore.collection('vehicules';            throw TimeoutException('Le test de connexion √† Firestore a pris trop de temps.';      debugPrint('[VehiculeService] Test de connexion √† Firestore r√©ussi: ${testQuery.docs.length} documents trouv√©s';      debugPrint('[VehiculeService] Erreur lors du test de connexion √† Firestore: $e';      // V√©rifier si c'est une erreur d';      if (e.toString().contains('permission-denied') || e.toString().contains('PERMISSION_DENIED';        throw Exception('Vous n\'avez pas les autorisations n√©cessaires pour acc√©der √† cette fonctionnalit√©. Veuillez contacter l\'administrateur.';      } else if (e.toString().contains('network';                e.toString().contains('connection';                e.toString().contains('timeout';                e.toString().contains('socket';        throw Exception('Impossible de se connecter √† la base de donn√©es. Veuillez v√©rifier votre connexion internet.';        throw Exception('Erreur lors de la connexion √† la base de donn√©es: $e';      debugPrint('[VehiculeService] Ajout d\'un nouveau v√©hicule: ${vehicule.immatriculation}';          throw Exception('Mode hors ligne: Le v√©hicule sera ajout√© automatiquement lorsque la connexion Internet sera r√©tablie.';        final docRef = _firestore.collection('vehicules';        debugPrint('[VehiculeService] ID g√©n√©r√© pour le v√©hicule: $vehiculeId';          debugPrint('[VehiculeService] T√©l√©chargement direct de la photo recto';              'vehicules/$vehiculeId/recto';              debugPrint('[VehiculeService] Op√©ration annul√©e apr√®s t√©l√©chargement de la photo recto';            debugPrint('[VehiculeService] Photo recto t√©l√©charg√©e: $photoRectoUrl';            debugPrint('[VehiculeService] Erreur lors du t√©l√©chargement de la photo recto: $e';              throw TimeoutException('Le t√©l√©chargement de l\'image a pris trop de temps. Veuillez utiliser une image plus petite ou v√©rifier votre connexion internet.';            debugPrint('[VehiculeService] Continuation sans la photo recto';          debugPrint('[VehiculeService] T√©l√©chargement direct de la photo verso';              'vehicules/$vehiculeId/verso';              debugPrint('[VehiculeService] Op√©ration annul√©e apr√®s t√©l√©chargement de la photo verso';            debugPrint('[VehiculeService] Photo verso t√©l√©charg√©e: $photoVersoUrl';            debugPrint('[VehiculeService] Erreur lors du t√©l√©chargement de la photo verso: $e';              throw TimeoutException('Le t√©l√©chargement de l\'image a pris trop de temps. Veuillez utiliser une image plus petite ou v√©rifier votre connexion internet.';            debugPrint('[VehiculeService] Continuation sans la photo verso';          debugPrint('[VehiculeService] Op√©ration annul√©e avant l\'enregistrement dans Firestore';        // Cr√©er un nouveau v√©hicule avec l';        vehiculeMapData['createdAt';        vehiculeMapData['updatedAt';        debugPrint('[VehiculeService] Enregistrement du v√©hicule dans Firestore';              throw TimeoutException('L\'enregistrement du v√©hicule a pris trop de temps. Veuillez v√©rifier votre connexion internet.';        debugPrint('[VehiculeService] V√©hicule enregistr√© dans Firestore';        if (onProgress != null) onProgress(0.9); // 90% apr√®s l';        debugPrint('[VehiculeService] Liste des v√©hicules du conducteur mise √† jour';        debugPrint('[VehiculeService] Timeout global atteint';        throw TimeoutException('L\'op√©ration a pris trop de temps. Veuillez r√©essayer avec des images plus petites ou v√©rifier votre connexion internet.';      debugPrint('[VehiculeService] Erreur lors de l\'ajout du v√©hicule: $e';      if (e.toString().contains('network';          e.toString().contains('connection';          e.toString().contains('timeout';          e.toString().contains('socket';        throw Exception('Impossible de se connecter √† la base de donn√©es. Veuillez v√©rifier votre connexion internet.';      // G√©rer les erreurs d';      if (e.toString().contains('permission') || e.toString().contains('denied';        throw Exception('Vous n\'avez pas les autorisations n√©cessaires pour effectuer cette action.';      debugPrint('[VehiculeService] Sauvegarde du v√©hicule en mode hors ligne';      final String offlineId = 'offline_${DateTime.now().millisecondsSinceEpoch}';        final appDir = await Directory.systemTemp.createTemp('offline_vehicules';        final rectoFile = File('${appDir.path}/recto_$offlineId.jpg';        debugPrint('[VehiculeService] Photo recto sauvegard√©e localement: ${rectoFile.path}';        final appDir = await Directory.systemTemp.createTemp('offline_vehicules';        final versoFile = File('${appDir.path}/verso_$offlineId.jpg';        debugPrint('[VehiculeService] Photo verso sauvegard√©e localement: ${versoFile.path}';      // Cr√©er un v√©hicule avec l';      // R√©cup√©rer la file d';      final offlineQueueJson = prefs.getString('offline_vehicules_queue') ?? '[]';      // Ajouter le nouveau v√©hicule √† la file d';        'vehicule';        'photoRectoPath';        'photoVersoPath';        'timestamp';        'action': 'add';      // Sauvegarder la file d';      await prefs.setString('offline_vehicules_queue';      debugPrint('[VehiculeService] V√©hicule sauvegard√© en mode hors ligne: $offlineId';      debugPrint('[VehiculeService] Erreur lors de la sauvegarde hors ligne: $e';      throw Exception('Erreur lors de la sauvegarde en mode hors ligne: $e';      debugPrint('[VehiculeService] Tentative de synchronisation des v√©hicules hors ligne';        debugPrint('[VehiculeService] Pas de connexion Internet, synchronisation impossible';      // R√©cup√©rer la file d';      final offlineQueueJson = prefs.getString('offline_vehicules_queue';      if (offlineQueueJson == null || offlineQueueJson == '[]';        debugPrint('[VehiculeService] Aucun v√©hicule hors ligne √† synchroniser';      debugPrint('[VehiculeService] ${offlineQueue.length} v√©hicules hors ligne √† synchroniser';      // Traiter chaque √©l√©ment de la file d';        final action = item['action';        if (action == 'add';            final vehiculeData = Map<String, dynamic>.from(item['vehicule';            final String? photoRectoPath = item['photoRectoPath';            final String? photoVersoPath = item['photoVersoPath';            debugPrint('[VehiculeService] Synchronisation du v√©hicule: ${vehicule.immatriculation}';            // Cr√©er un nouveau v√©hicule sans l';              debugPrint('[VehiculeService] V√©hicule synchronis√© avec succ√®s: $vehiculeId';            debugPrint('[VehiculeService] Erreur lors de la synchronisation du v√©hicule: $e';        // Ajouter d';      // Supprimer les √©l√©ments trait√©s de la file d';        // Trier les indices en ordre d√©croissant pour √©viter les probl√®mes d';        // Sauvegarder la file d';        await prefs.setString('offline_vehicules_queue';        debugPrint('[VehiculeService] File d\'attente hors ligne mise √† jour: ${offlineQueue.length} √©l√©ments restants';      debugPrint('[VehiculeService] Erreur lors de la synchronisation des v√©hicules hors ligne: $e';        throw Exception('ID du v√©hicule non d√©fini';      debugPrint('[VehiculeService] Mise √† jour du v√©hicule: ${vehicule.id}';          throw Exception('Mode hors ligne: La mise √† jour du v√©hicule sera effectu√©e automatiquement lorsque la connexion Internet sera r√©tablie.';          debugPrint('[VehiculeService] T√©l√©chargement direct de la nouvelle photo recto';              'vehicules/${vehicule.id}/recto';              debugPrint('[VehiculeService] Op√©ration annul√©e apr√®s t√©l√©chargement de la photo recto';            debugPrint('[VehiculeService] Nouvelle photo recto t√©l√©charg√©e: $photoRectoUrl';            debugPrint('[VehiculeService] Erreur lors du t√©l√©chargement de la photo recto: $e';              throw TimeoutException('Le t√©l√©chargement de l\'image a pris trop de temps. Veuillez utiliser une image plus petite ou v√©rifier votre connexion internet.';            debugPrint('[VehiculeService] Continuation sans la photo recto';          debugPrint('[VehiculeService] T√©l√©chargement direct de la nouvelle photo verso';              'vehicules/${vehicule.id}/verso';              debugPrint('[VehiculeService] Op√©ration annul√©e apr√®s t√©l√©chargement de la photo verso';            debugPrint('[VehiculeService] Nouvelle photo verso t√©l√©charg√©e: $photoVersoUrl';            debugPrint('[VehiculeService] Erreur lors du t√©l√©chargement de la photo verso: $e';              throw TimeoutException('Le t√©l√©chargement de l\'image a pris trop de temps. Veuillez utiliser une image plus petite ou v√©rifier votre connexion internet.';            debugPrint('[VehiculeService] Continuation sans la photo verso';          debugPrint('[VehiculeService] Op√©ration annul√©e avant l\'enregistrement dans Firestore';        vehiculeMapData['updatedAt';        debugPrint('[VehiculeService] Enregistrement des modifications dans Firestore';            .collection('vehicules';              throw TimeoutException('La mise √† jour du v√©hicule a pris trop de temps. Veuillez v√©rifier votre connexion internet.';        debugPrint('[VehiculeService] V√©hicule mis √† jour avec succ√®s';        debugPrint('[VehiculeService] Timeout global atteint';        throw TimeoutException('L\'op√©ration a pris trop de temps. Veuillez r√©essayer avec des images plus petites ou v√©rifier votre connexion internet.';      debugPrint('[VehiculeService] Erreur lors de la mise √† jour du v√©hicule: $e';      if (e.toString().contains('network';          e.toString().contains('connection';          e.toString().contains('timeout';          e.toString().contains('socket';        throw Exception('Impossible de se connecter √† la base de donn√©es. Veuillez v√©rifier votre connexion internet.';      // G√©rer les erreurs d';      if (e.toString().contains('permission') || e.toString().contains('denied';        throw Exception('Vous n\'avez pas les autorisations n√©cessaires pour effectuer cette action.';      debugPrint('[VehiculeService] Sauvegarde de la mise √† jour du v√©hicule en mode hors ligne';        final appDir = await Directory.systemTemp.createTemp('offline_vehicules';        final rectoFile = File('${appDir.path}/recto_update_${vehicule.id}.jpg';        debugPrint('[VehiculeService] Photo recto sauvegard√©e localement: ${rectoFile.path}';        final appDir = await Directory.systemTemp.createTemp('offline_vehicules';        final versoFile = File('${appDir.path}/verso_update_${vehicule.id}.jpg';        debugPrint('[VehiculeService] Photo verso sauvegard√©e localement: ${versoFile.path}';      // R√©cup√©rer la file d';      final offlineQueueJson = prefs.getString('offline_vehicules_queue') ?? '[]';      // Ajouter la mise √† jour du v√©hicule √† la file d';        'vehicule';        'photoRectoPath';        'photoVersoPath';        'timestamp';        'action': 'update';      // Sauvegarder la file d';      await prefs.setString('offline_vehicules_queue';      debugPrint('[VehiculeService] Mise √† jour du v√©hicule sauvegard√©e en mode hors ligne: ${vehicule.id}';      debugPrint('[VehiculeService] Erreur lors de la sauvegarde hors ligne: $e';      throw Exception('Erreur lors de la sauvegarde en mode hors ligne: $e';      debugPrint('[VehiculeService] Suppression du v√©hicule: $vehiculeId';        throw Exception('Mode hors ligne: La suppression du v√©hicule sera effectu√©e automatiquement lorsque la connexion Internet sera r√©tablie.';          .collection('vehicules';            throw TimeoutException('La suppression du v√©hicule a pris trop de temps. Veuillez v√©rifier votre connexion internet.';      await prefs.remove('vehicule_$vehiculeId';      debugPrint('[VehiculeService] V√©hicule supprim√© avec succ√®s';      debugPrint('[VehiculeService] Erreur lors de la suppression du v√©hicule: $e';        throw TimeoutException('La suppression du v√©hicule a pris trop de temps. Veuillez v√©rifier votre connexion internet.';      if (e.toString().contains('network';          e.toString().contains('connection';          e.toString().contains('timeout';          e.toString().contains('socket';        throw Exception('Impossible de se connecter √† la base de donn√©es. Veuillez v√©rifier votre connexion internet.';      debugPrint('[VehiculeService] Sauvegarde de la suppression du v√©hicule en mode hors ligne';      // R√©cup√©rer la file d';      final offlineQueueJson = prefs.getString('offline_vehicules_queue') ?? '[]';      // Ajouter la suppression du v√©hicule √† la file d';        'vehiculeId';        'proprietaireId';        'timestamp';        'action': 'delete';      // Sauvegarder la file d';      await prefs.setString('offline_vehicules_queue';      debugPrint('[VehiculeService] Suppression du v√©hicule sauvegard√©e en mode hors ligne: $vehiculeId';      debugPrint('[VehiculeService] Erreur lors de la sauvegarde hors ligne: $e';      throw Exception('Erreur lors de la sauvegarde en mode hors ligne: $e';  // Supprimer les photos d';      debugPrint('[VehiculeService] Suppression des photos du v√©hicule: $vehiculeId';      final ref = _storage.ref().child('vehicules/$vehiculeId';          debugPrint('[VehiculeService] Photo supprim√©e: ${item.fullPath}';            debugPrint('[VehiculeService] Photo supprim√©e: ${item.fullPath}';        // Ignorer les erreurs si le dossier n';        debugPrint('[VehiculeService] Avertissement lors de la suppression des photos: $e';      debugPrint('[VehiculeService] Erreur lors de la suppression des photos: $e';  // Mettre √† jour la liste des v√©hicules d';      debugPrint('[VehiculeService] Mise √† jour des v√©hicules du conducteur: $conducteurId';      final conducteurRef = _firestore.collection('conducteurs';        debugPrint('[VehiculeService] Document conducteur non trouv√©: $conducteurId';        // Ajouter l';          'vehiculeIds';          'updatedAt';        debugPrint('[VehiculeService] V√©hicule ajout√© √† la liste du conducteur';        // Supprimer l';          'vehiculeIds';          'updatedAt';        debugPrint('[VehiculeService] V√©hicule supprim√© de la liste du conducteur';      debugPrint('[VehiculeService] Erreur lors de la mise √† jour des v√©hicules du conducteur: $e';      // Ne pas relancer l'exception pour √©viter de bloquer l';      // en cas d';}