import 'dart:math';import 'package:cloud_firestore/cloud_firestore.dart';import 'package:flutter/foundation.dart';import '../models/vehicule_complet_model.dart';/// üèóÔ∏è G√©n√©rateur de donn√©es compl√®tes pour v√©hicules avec structure d';  /// üöÄ G√©n√©rer toute la structure d';    debugPrint('üöÄ G√©n√©ration structure d\'assurance compl√®te...';      // 1. G√©n√©rer les compagnies d';      debugPrint('‚úÖ Structure d\'assurance g√©n√©r√©e avec succ√®s !';      debugPrint('‚ùå Erreur g√©n√©ration structure: $e';  /// üè¢ G√©n√©rer les compagnies d';    debugPrint('üè¢ G√©n√©ration compagnies d\'assurance...';        'id': 'STAR';        'nom': 'STAR Assurances';        'code': 'STAR';        'siret': '12345678901234';        'adresse_siege': 'Avenue Habib Bourguiba, Tunis';        'telephone': '+216 71 123 456';        'email': 'contact@star.tn';        'logo_url': 'https://example.com/star-logo.png';        'date_creation';        'capital_social';        'total_vehicules';        'total_contrats';        'chiffre_affaires_annuel';        'id': 'MAGHREBIA';        'nom': 'Maghrebia Assurances';        'code': 'MAGHREBIA';        'siret': '23456789012345';        'adresse_siege': 'Avenue de la Libert√©, Tunis';        'telephone': '+216 71 234 567';        'email': 'contact@maghrebia.tn';        'logo_url': 'https://example.com/maghrebia-logo.png';        'date_creation';        'capital_social';        'total_vehicules';        'total_contrats';        'chiffre_affaires_annuel';        'id': 'LLOYD';        'nom': 'Lloyd Tunisien';        'code': 'LLOYD';        'siret': '34567890123456';        'adresse_siege': 'Rue de Marseille, Tunis';        'telephone': '+216 71 345 678';        'email': 'contact@lloyd.tn';        'logo_url': 'https://example.com/lloyd-logo.png';        'date_creation';        'capital_social';        'total_vehicules';        'total_contrats';        'chiffre_affaires_annuel';        'id': 'GAT';        'nom': 'GAT Assurances';        'code': 'GAT';        'siret': '45678901234567';        'adresse_siege': 'Avenue Mohamed V, Tunis';        'telephone': '+216 71 456 789';        'email': 'contact@gat.tn';        'logo_url': 'https://example.com/gat-logo.png';        'date_creation';        'capital_social';        'total_vehicules';        'total_contrats';        'chiffre_affaires_annuel';        'id': 'AST';        'nom': 'Assurances Salim';        'code': 'AST';        'siret': '56789012345678';        'adresse_siege': 'Rue Ibn Khaldoun, Tunis';        'telephone': '+216 71 567 890';        'email': 'contact@ast.tn';        'logo_url': 'https://example.com/ast-logo.png';        'date_creation';        'capital_social';        'total_vehicules';        'total_contrats';        'chiffre_affaires_annuel';        'nom': compagnieData['nom';        'siret': compagnieData['siret';        'adresse_siege': compagnieData['adresse_siege';        'telephone': compagnieData['telephone';        'email': compagnieData['email';        'logo_url': compagnieData['logo_url';        'date_creation': Timestamp.fromDate(compagnieData['date_creation';        'capital_social': compagnieData['capital_social';        'agences';        'total_vehicules': compagnieData['total_vehicules';        'total_contrats': compagnieData['total_contrats';        'chiffre_affaires_annuel': compagnieData['chiffre_affaires_annuel';        'createdAt';        'updatedAt';        _firestore.collection('compagnies_assurance').doc(compagnieData['id';    debugPrint('‚úÖ 5 compagnies d\'assurance cr√©√©es';  /// üè™ G√©n√©rer les agences d';    debugPrint('üè™ G√©n√©ration agences d\'assurance...';      {'compagnie': 'STAR', 'gouvernorat': 'Tunis', 'delegation': 'Centre Ville', 'code': 'TUN001';      {'compagnie': 'STAR', 'gouvernorat': 'Sfax', 'delegation': 'Sfax Nord', 'code': 'SFX001';      {'compagnie': 'STAR', 'gouvernorat': 'Sousse', 'delegation': 'Sousse Centre', 'code': 'SOU001';      {'compagnie': 'MAGHREBIA', 'gouvernorat': 'Tunis', 'delegation': 'Lac 2', 'code': 'TUN002';      {'compagnie': 'MAGHREBIA', 'gouvernorat': 'Sfax', 'delegation': 'Sfax Sud', 'code': 'SFX002';      {'compagnie': 'MAGHREBIA', 'gouvernorat': 'Monastir', 'delegation': 'Monastir Centre', 'code': 'MON001';      {'compagnie': 'LLOYD', 'gouvernorat': 'Tunis', 'delegation': 'Manouba', 'code': 'TUN003';      {'compagnie': 'LLOYD', 'gouvernorat': 'Nabeul', 'delegation': 'Nabeul Centre', 'code': 'NAB001';      {'compagnie': 'LLOYD', 'gouvernorat': 'Bizerte', 'delegation': 'Bizerte Nord', 'code': 'BIZ001';      {'compagnie': 'GAT', 'gouvernorat': 'Tunis', 'delegation': 'Ariana', 'code': 'TUN004';      {'compagnie': 'GAT', 'gouvernorat': 'Gab√®s', 'delegation': 'Gab√®s Centre', 'code': 'GAB001';      {'compagnie': 'GAT', 'gouvernorat': 'Kairouan', 'delegation': 'Kairouan Centre', 'code': 'KAI001';      {'compagnie': 'AST', 'gouvernorat': 'Tunis', 'delegation': 'Ben Arous', 'code': 'TUN005';      {'compagnie': 'AST', 'gouvernorat': 'M√©denine', 'delegation': 'M√©denine Centre', 'code': 'MED001';      {'compagnie': 'AST', 'gouvernorat': 'Gafsa', 'delegation': 'Gafsa Centre', 'code': 'GAF001';      final agenceId = 'agence_${agenceData['code']?.toLowerCase()}';        'compagnie_id': agenceData['compagnie';        'nom': '${agenceData['compagnie']} ${agenceData['gouvernorat']} ${agenceData['delegation']}';        'code_agence': agenceData['code';        'gouvernorat': agenceData['gouvernorat';        'delegation': agenceData['delegation';        'adresse': '${_random.nextInt(200) + 1} Avenue ${_generateStreetName()}, ${agenceData['gouvernorat']}';        'telephone': '+216 ${70 + _random.nextInt(9)} ${_random.nextInt(900) + 100} ${_random.nextInt(900) + 100}';        'directeur';          'nom';          'prenom';          'telephone': '+216 ${20 + _random.nextInt(9)} ${_random.nextInt(900) + 100} ${_random.nextInt(900) + 100}';          'email': 'directeur.${agenceData['code']?.toLowerCase()}@${agenceData['compagnie']?.toLowerCase()}.tn';        'agents_ids';        'zone_couverture': [agenceData['gouvernorat'], agenceData['delegation';        'vehicules_geres';        'contrats_actifs';        'createdAt';        'updatedAt';        _firestore.collection('agences';    debugPrint('‚úÖ 15 agences cr√©√©es';  /// üë®‚Äçüíº G√©n√©rer les agents d';    debugPrint('üë®‚Äçüíº G√©n√©ration agents d\'assurance...';    final agencesSnapshot = await _firestore.collection('agences';        final agentId = 'agent_${agentCounter.toString().padLeft(3, '0')}';          'user_id': 'user_$agentId', // Sera li√© lors de l';          'compagnie_id': agenceData['compagnie_id';          'agence_id';          'matricule_agent': 'AG${agentCounter.toString().padLeft(4, '0')}';          'nom';          'prenom';          'cin';          'telephone': '+216 ${20 + _random.nextInt(9)} ${_random.nextInt(900) + 100} ${_random.nextInt(900) + 100}';          'email': 'agent$agentCounter@${agenceData['compagnie_id'].toString().toLowerCase()}.tn';          'date_embauche';          'statut': 'actif';          'portefeuille';            'vehicules_geres';            'contrats_actifs';            'chiffre_affaires';          'zone_responsabilite': [agenceData['delegation';          'permissions': ['creer_contrat', 'modifier_contrat', 'valider_sinistre';          'createdAt';          'updatedAt';          _firestore.collection('agents_assurance';    debugPrint('‚úÖ ${agentCounter - 1} agents cr√©√©s';    debugPrint('üöó G√©n√©ration v√©hicules complets...';    final marques = ['Peugeot', 'Renault', 'Citro√´n', 'Volkswagen', 'Toyota', 'Hyundai', 'Kia', 'Nissan', 'Ford', 'Opel';      'Peugeot': ['208', '308', '3008', '5008', '2008';      'Renault': ['Clio', 'Megane', 'Captur', 'Kadjar', 'Scenic';      'Citro√´n': ['C3', 'C4', 'C5 Aircross', 'Berlingo', 'Picasso';      'Volkswagen': ['Golf', 'Polo', 'Tiguan', 'Passat', 'T-Cross';      'Toyota': ['Yaris', 'Corolla', 'RAV4', 'C-HR', 'Prius';    final compagnies = ['STAR', 'MAGHREBIA', 'LLOYD', 'GAT', 'AST';    final couleurs = ['Blanc', 'Noir', 'Gris', 'Rouge', 'Bleu', 'Argent';    final typesCouverture = ['Tiers', 'Tiers+', 'Tous risques';    final relations = ['proprietaire', 'conjoint', 'enfant', 'autre';      final modele = modeles[marque]?[_random.nextInt(modeles[marque]!.length)] ?? 'Mod√®le';      final vehiculeId = _firestore.collection('vehicules_complets';        numeroContrat: '$compagnie-${now.year}-${(i + 1).toString().padLeft(6, '0')}';        agenceId: 'agence_${compagnie.toLowerCase()}001';        agentGestionnaire: 'agent_${_random.nextInt(50) + 1}';        statut: 'actif';          conducteurEmail: '${proprietaire.prenom.toLowerCase()}.${proprietaire.nom.toLowerCase()}@gmail.com';          relation: 'proprietaire';          droits: ['conduire', 'declarer_sinistre';            conducteurEmail: 'conducteur${i + 500}@gmail.com';            droits: ['conduire';        typeCarburant: _random.nextBool() ? 'Essence' : 'Diesel';        _firestore.collection('vehicules_complets';        debugPrint('‚úÖ ${i + 1} v√©hicules cr√©√©s';    debugPrint('‚úÖ 500 v√©hicules complets cr√©√©s';    final region = ['TUN', 'SFX', 'SOU', 'BIZ', 'GAB';    return '${numbers.toString().padLeft(3, '0')} $region ${suffix.toString().padLeft(3, '0')}';    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';    final prefixes = ['20', '21', '22', '23', '24', '25', '26', '27', '28', '29';    final number = _random.nextInt(999999).toString().padLeft(6, '0';    return '+216 $prefix $number';      'Ben Ali', 'Trabelsi', 'Bouazizi', 'Chedly', 'Hammami', 'Jebali';      'Marzouki', 'Essebsi', 'Karoui', 'Belhaj', 'Sfar', 'Gharbi';      'Nasri', 'Khelifi', 'Mansouri', 'Agrebi', 'Dridi', 'Mejri';      'Mohamed', 'Ahmed', 'Ali', 'Mahmoud', 'Omar', 'Youssef', 'Karim', 'Sami';      'Fatma', 'Aisha', 'Khadija', 'Maryam', 'Salma', 'Nour', 'Rahma', 'Ines';      'Amira', 'Yasmine', 'Dorra', 'Emna', 'Hajer', 'Rim', 'Sarra', 'Wiem';      'Habib Bourguiba', 'de la Libert√©', 'Mohamed V', 'Ibn Khaldoun';      'de la R√©publique', 'de la Paix', 'Hedi Chaker', 'Mongi Bali';    final villes = ['Tunis', 'Sfax', 'Sousse', 'Bizerte', 'Gab√®s', 'Monastir';    return '$numero Avenue $rue, $ville';