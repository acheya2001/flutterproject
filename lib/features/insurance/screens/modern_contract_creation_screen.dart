import 'package:flutter/material.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../services/contrat_vehicule_service.dart';/// üé® Interface moderne pour cr√©er des contrats d';  String _typeContrat = 'responsabilite_civile';  String _typeVehicule = 'voiture';  String _carburant = 'essence';  List<String> _couverturesSelectionnees = ['responsabilite_civile';    'responsabilite_civile';    'tous_risques';    'tiers_collision';    'vol_incendie';    'voiture';    'moto';    'camion';    'utilitaire';    'autocar';    'essence';    'diesel';    'electrique';    'hybride';    'gpl';    'responsabilite_civile';    'dommages_collision';    'vol';    'incendie';    'bris_de_glace';    'catastrophes_naturelles';    'assistance_depannage';    'protection_juridique';        title: const Text('Nouveau Contrat';            'üë§ Rechercher le Conducteur';            'Saisissez l\'email du conducteur pour cr√©er le contrat';            label: 'Email du conducteur';                      'Conducteur trouv√© ! Vous pouvez continuer.';            'üöó Informations du V√©hicule';            'Saisissez les d√©tails du v√©hicule √† assurer';            label: 'Immatriculation';                  label: 'Marque';                  label: 'Mod√®le';                  label: 'Ann√©e';                  label: 'Couleur';            label: 'Type de v√©hicule';            label: 'Carburant';            label: 'Num√©ro de s√©rie/ch√¢ssis';            'üìÑ D√©tails du Contrat';            'Configurez les conditions du contrat d\'assurance';            label: 'Type de contrat';                  label: 'Date de d√©but';                  label: 'Date de fin';                  label: 'Prime annuelle (TND)';                  label: 'Prime mensuelle (TND)';            'Couvertures incluses';            'üìã R√©capitulatif';            'V√©rifiez les informations avant de cr√©er le contrat';          _buildRecapSection('Conducteur';            'Email: ${_conducteurEmailController.text}';          _buildRecapSection('V√©hicule';            'Immatriculation: ${_immatriculationController.text}';            'Marque: ${_marqueController.text}';            'Mod√®le: ${_modeleController.text}';            'Ann√©e: ${_anneeController.text}';            'Type: $_typeVehicule';            'Carburant: $_carburant';          _buildRecapSection('Contrat';            'Type: $_typeContrat';            'P√©riode: ${_formatDate(_dateDebut)} - ${_formatDate(_dateFin)}';            'Prime annuelle: ${_primeAnnuelleController.text} TND';            'Prime mensuelle: ${_primeMensuelleController.text} TND';            'Couvertures: ${_couverturesSelectionnees.length} s√©lectionn√©es';                label: const Text('Pr√©c√©dent';              label: Text(_currentPage == 3 ? 'Cr√©er le contrat' : 'Suivant';          setState(() => _errorMessage = 'Veuillez rechercher et s√©lectionner un conducteur';          setState(() => _errorMessage = 'Veuillez remplir tous les champs obligatoires';          setState(() => _errorMessage = 'Veuillez saisir les montants des primes';          setState(() => _errorMessage = 'Veuillez s√©lectionner au moins une couverture';          .collection('conducteurs';          .where('email';          _errorMessage = 'Aucun conducteur trouv√© avec cet email';        _errorMessage = 'Erreur lors de la recherche: $e';      // Cr√©er d';        throw Exception('Erreur lors de la cr√©ation du v√©hicule';          'montantAnnuel';          'montantMensuel';          'devise': 'TND';            content: Text('‚úÖ Contrat cr√©√© avec succ√®s !';        throw Exception('Erreur lors de la cr√©ation du contrat';      setState(() => _errorMessage = 'Erreur: $e';    return option.replaceAll('_', ' ').split(' ';    }).join(' ';      'responsabilite_civile': 'Responsabilit√© civile';      'dommages_collision': 'Dommages collision';      'vol': 'Vol';      'incendie': 'Incendie';      'bris_de_glace': 'Bris de glace';      'catastrophes_naturelles': 'Catastrophes naturelles';      'assistance_depannage': 'Assistance d√©pannage';      'protection_juridique': 'Protection juridique';    return '${date.day.toString().padLeft(2, '0')}/${date.month.toString().padLeft(2, '0')}/${date.year}';}