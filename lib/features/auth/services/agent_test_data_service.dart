import 'package:cloud_firestore/cloud_firestore.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:flutter/foundation.dart';/// ğŸ§ª Service pour crÃ©er les donnÃ©es de test pour l';  /// ğŸ—ï¸ CrÃ©er toutes les donnÃ©es de test nÃ©cessaires pour l';      debugPrint('[AgentTestData] ğŸ—ï¸ DÃ©but crÃ©ation donnÃ©es de test...';      // 1. CrÃ©er le compte Firebase Auth pour l';      // 2. CrÃ©er la compagnie d';      // 3. CrÃ©er l';      debugPrint('[AgentTestData] âœ… Toutes les donnÃ©es de test crÃ©Ã©es avec succÃ¨s';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation donnÃ©es: $e';      debugPrint('[AgentTestData] ğŸ‘¤ CrÃ©ation compte Firebase Auth...';      final testEmail = 'agent.test.$timestamp@constat-tunisie.app';      const testPassword = 'TestAgent123!';      debugPrint('[AgentTestData] ğŸ“§ Email de test: $testEmail';      if (existingUser?.email?.contains('agent.test';        debugPrint('[AgentTestData] âœ… Compte de test dÃ©jÃ  connectÃ©';        debugPrint('[AgentTestData] âœ… Compte Firebase crÃ©Ã©: ${userCredential.user?.uid}';        debugPrint('[AgentTestData] âš ï¸ Erreur crÃ©ation (probablement type casting): $createError';        // VÃ©rifier si l'utilisateur a Ã©tÃ© crÃ©Ã© malgrÃ© l';          debugPrint('[AgentTestData] âœ… Compte crÃ©Ã© malgrÃ© erreur de type casting';          debugPrint('[AgentTestData] ğŸ”„ Tentative avec compte existant...';              email: 'hammami123rahma@gmail.com';              password: 'Acheya123';            _testEmail = 'hammami123rahma@gmail.com';            _testPassword = 'Acheya123';            debugPrint('[AgentTestData] âœ… Connexion compte existant rÃ©ussie';            debugPrint('[AgentTestData] âŒ Ã‰chec connexion compte existant: $signInError';            _testEmail = 'hammami123rahma@gmail.com';            _testPassword = 'Acheya123';            debugPrint('[AgentTestData] âš ï¸ Utilisation identifiants par dÃ©faut';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation compte: $e';      // En cas d';      _testEmail = 'hammami123rahma@gmail.com';      _testPassword = 'Acheya123';      debugPrint('[AgentTestData] âš ï¸ Fallback vers identifiants par dÃ©faut';        'email';        'password';  /// ğŸ¢ CrÃ©er la compagnie d';      debugPrint('[AgentTestData] ğŸ¢ CrÃ©ation compagnie STAR...';      await _firestore.collection('insurance_companies').doc('star';        'nom': 'STAR Assurances';        'code': 'STAR';        'statut': 'active';        'adresse': 'Avenue Habib Bourguiba, Tunis';        'telephone': '+216 71 123 456';        'email': 'contact@star.tn';        'site_web': 'www.star.com.tn';        'logo_url': 'https://example.com/star-logo.png';        'date_creation';        'createdAt';        'updatedAt';      debugPrint('[AgentTestData] âœ… Compagnie STAR crÃ©Ã©e';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation compagnie: $e';  /// ğŸª CrÃ©er l';      debugPrint('[AgentTestData] ğŸª CrÃ©ation agence STAR Tunis...';      await _firestore.collection('agences').doc('star_tunis_01';        'nom': 'STAR Tunis Centre';        'compagnie': 'STAR';        'gouvernorat': 'Tunis';        'ville': 'Tunis';        'adresse': 'Avenue Habib Bourguiba, Tunis 1000';        'telephone': '+216 71 234 567';        'email': 'tunis@star.tn';        'responsable': 'Ahmed Ben Ali';        'nombreAgents';        'statut': 'active';        'createdAt';        'updatedAt';      debugPrint('[AgentTestData] âœ… Agence STAR Tunis crÃ©Ã©e';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation agence: $e';      debugPrint('[AgentTestData] ğŸ‘¨â€ğŸ’¼ CrÃ©ation profil assureur...';        throw Exception('Aucun utilisateur connectÃ©';      final userEmail = user.email ?? _testEmail ?? 'agent.test@constat-tunisie.app';      await _firestore.collection('assureurs';        'email';        'nom': 'Agent';        'prenom': 'Test';        'telephone': '+216 20 123 456';        'compagnie': 'STAR';        'matricule': 'STAR001';        'agence': 'star_tunis_01';        'agenceNom': 'STAR Tunis Centre';        'gouvernorat': 'Tunis';        'poste': 'Agent Commercial';        'permissions': ['view_contracts', 'create_contracts', 'manage_clients';        'dossierIds';        'date_embauche';        'statut': 'actif';        'adresse': 'Tunis, Tunisie';        'createdAt';        'updatedAt';        'derniere_connexion';      debugPrint('[AgentTestData] âœ… Profil assureur crÃ©Ã© pour: $userEmail';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation profil: $e';      debugPrint('[AgentTestData] ğŸ“„ CrÃ©ation document users...';        throw Exception('Aucun utilisateur connectÃ©';      final userEmail = user.email ?? _testEmail ?? 'agent.test@constat-tunisie.app';      await _firestore.collection('users';        'email';        'userType': 'assureur';        'accountStatus': 'active';        'nom': 'Agent';        'prenom': 'Test';        'telephone': '+216 20 123 456';        'createdAt';        'updatedAt';      debugPrint('[AgentTestData] âœ… Document users crÃ©Ã© pour: $userEmail';      debugPrint('[AgentTestData] âŒ Erreur crÃ©ation document users: $e';      debugPrint('[AgentTestData] ğŸ§¹ Nettoyage donnÃ©es de test...';        await _firestore.collection('assureurs';        await _firestore.collection('users';      await _firestore.collection('agences').doc('star_tunis_01';      await _firestore.collection('insurance_companies').doc('star';      debugPrint('[AgentTestData] âœ… Nettoyage terminÃ©';      debugPrint('[AgentTestData] âŒ Erreur nettoyage: $e';      final assureurDoc = await _firestore.collection('assureurs';      final companyDoc = await _firestore.collection('insurance_companies').doc('star';      final agencyDoc = await _firestore.collection('agences').doc('star_tunis_01';      debugPrint('[AgentTestData] âŒ Erreur vÃ©rification: $e';