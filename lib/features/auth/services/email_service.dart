import 'package:flutter/foundation.dart';import 'package:http/http.dart';import 'dart:convert';import 'dart:io';/// üìß Service d'envoi d';  static const String _clientId = '1059917372502-bcja6qd5feh9rpndg3klveh1pcihruj5.apps.googleusercontent.com';  static const String _refreshToken = '1//04fqCR47aG8PuCgYIARAAGAQSNwF-L9IrbmVfT1Ip925nf40rYtGez0sw_fJH341WZM9UHDhdWnkShe5AONoFyep4P6lS2E1VsFw';  static const String _senderEmail = 'constat.tunisie.app@gmail.com';  // URLs de l';  static const String _tokenUrl = 'https://oauth2.googleapis.com/token';  static const String _gmailApiUrl = 'https://gmail.googleapis.com/gmail/v1/users/me/messages/send';        headers: {'Content-Type': 'application/x-www-form-urlencoded';          'client_id';          'refresh_token';          'grant_type': 'refresh_token';        return data['access_token';        debugPrint('‚ùå Erreur obtention access token: ${response.statusCode}';        debugPrint('Response: ${response.body}';      debugPrint('‚ùå Exception obtention access token: $e';      // Obtenir l';        debugPrint('‚ùå Impossible d\'obtenir l\'access token';          'Authorization': 'Bearer $accessToken';          'Content-Type': 'application/json';          'raw';        debugPrint('‚úÖ Email envoy√© avec succ√®s √† $to';        debugPrint('‚ùå Erreur envoi email: ${response.statusCode}';        debugPrint('Response: ${response.body}';      debugPrint('‚ùå Exception envoi email: $e';    final boundary = 'boundary_${DateTime.now().millisecondsSinceEpoch}';    message.writeln('From: Constat Tunisie <$_senderEmail>';    message.writeln('To: $to';    message.writeln('Subject: $subject';    message.writeln('MIME-Version: 1.0';    message.writeln('Content-Type: multipart/alternative; boundary="$boundary"';      message.writeln('--$boundary';      message.writeln('Content-Type: text/plain; charset=UTF-8';      message.writeln('Content-Transfer-Encoding: quoted-printable';    message.writeln('--$boundary';    message.writeln('Content-Type: text/html; charset=UTF-8';    message.writeln('Content-Transfer-Encoding: quoted-printable';    message.writeln('--$boundary--';    print('üîç DEBUG: sendAccountApprovedEmail - to: $to, userName: $userName, userType: $userType';    final subject = '‚úÖ Votre compte Constat Tunisie a √©t√© approuv√© !';    final htmlBody = ''';            <p>Excellente nouvelle ! Votre demande de compte <strong>${userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert';            <strong>L';    ''';    final textBody = ''';Votre demande de compte ${userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert';L';    ''';    print('üîç DEBUG: Appel sendEmail avec sujet: $subject';    print(result ? '‚úÖ DEBUG: sendAccountApprovedEmail r√©ussi' : '‚ùå DEBUG: sendAccountApprovedEmail √©chou√©';    final subject = '‚ùå Votre demande de compte Constat Tunisie';    final htmlBody = ''';            <p>Nous avons examin√© votre demande de compte <strong>${userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert';                <li>üìû Contactez notre support pour plus d';            <strong>L';    ''';    final textBody = ''';Votre demande de compte ${userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert'} sur Constat Tunisie n';L';    ''';    final subject = 'üÜï Nouvelle demande de compte professionnel - Constat Tunisie';    final htmlBody = ''';                    <li><strong>Type :</strong> ${userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert';                <li>üìß L';    ''';