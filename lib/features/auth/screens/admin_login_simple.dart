import 'package:flutter/material.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../services/agent_test_data_service.dart';import '../../admin/screens/hierarchy_initialization_screen.dart';  final _emailController = TextEditingController(text: 'constat.tunisie.app@gmail.com';  final _passwordController = TextEditingController(text: 'Acheya123';      debugPrint('ğŸ¯ [ADMIN_SIMPLE] DÃ©but connexion...';        debugPrint('ğŸ¯ [ADMIN_SIMPLE] DÃ©jÃ  connectÃ©, navigation directe...';      debugPrint('ğŸ¯ [ADMIN_SIMPLE] Tentative de connexion...';          debugPrint('ğŸ¯ [ADMIN_SIMPLE] Tentative $retryCount/$maxRetries...';            debugPrint('ğŸ¯ [ADMIN_SIMPLE] Connexion rÃ©ussie: ${user.uid}';            throw Exception('Utilisateur non connectÃ© aprÃ¨s authentification';          debugPrint('ğŸ¯ [ADMIN_SIMPLE] Erreur auth tentative $retryCount: $authError';          if (authError.toString().contains('Connection reset by peer';              authError.toString().contains('I/O error';              authError.toString().contains('network';              debugPrint('ğŸ¯ [ADMIN_SIMPLE] Erreur rÃ©seau, retry dans 2s...';          if (authError.toString().contains('type cast';              authError.toString().contains('subtype';              authError.toString().contains('PigeonUserDetails';            debugPrint('ğŸ¯ [ADMIN_SIMPLE] Erreur de type dÃ©tectÃ©e, vÃ©rification utilisateur...';              debugPrint('ğŸ¯ [ADMIN_SIMPLE] Utilisateur connectÃ© malgrÃ© erreur, navigation...';          // Si derniÃ¨re tentative, propager l';      debugPrint('ğŸ¯ [ADMIN_SIMPLE] Erreur finale: $e';            content: Text('âŒ Erreur: $e';  /// ğŸš¨ Connexion d';      debugPrint('ğŸš¨ [ADMIN_SIMPLE] Connexion d\'urgence activÃ©e...';      if (_emailController.text.trim() == 'constat.tunisie.app@gmail.com';          _passwordController.text == 'Acheya123';        debugPrint('ğŸš¨ [ADMIN_SIMPLE] Identifiants valides, navigation directe...';              content: Text('ğŸš¨ Connexion d\'urgence rÃ©ussie';        throw Exception('Identifiants incorrects';      debugPrint('ğŸš¨ [ADMIN_SIMPLE] Erreur connexion d\'urgence: $e';            content: Text('âŒ Erreur: $e';    debugPrint('ğŸ¯ [ADMIN_SIMPLE] Navigation vers admin...';      Navigator.pushReplacementNamed(context, '/admin/home';      debugPrint('ğŸ¯ [ADMIN_SIMPLE] Navigation terminÃ©e';  /// ğŸ§ª CrÃ©er les donnÃ©es de test pour l';      debugPrint('ğŸ§ª [ADMIN_SIMPLE] CrÃ©ation donnÃ©es test agent...';              title: const Text('âœ… DonnÃ©es de test crÃ©Ã©es';                  const Text('Identifiants de connexion agent :';                  SelectableText('Email: ${credentials['email']}';                  SelectableText('Mot de passe: ${credentials['password']}';                    'Utilisez ces identifiants pour vous connecter en tant qu\'agent d\'assurance.';                  child: const Text('OK';              content: Text('âœ… DonnÃ©es de test agent crÃ©Ã©es avec succÃ¨s';      debugPrint('ğŸ§ª [ADMIN_SIMPLE] DonnÃ©es test crÃ©Ã©es avec succÃ¨s';      debugPrint('ğŸš¨ [ADMIN_SIMPLE] Erreur crÃ©ation donnÃ©es test: $e';            content: Text('âŒ Erreur: $e';        title: const Text('ğŸ¯ Admin Simple';              'Connexion Administrateur';                labelText: 'Email';                labelText: 'Mot de passe';                        'Se connecter';            // Bouton connexion d';                  'ğŸš¨ Connexion d\'urgence';                  'ğŸ§ª CrÃ©er donnÃ©es test agent';                label: const Text('ğŸ¢ Initialiser HiÃ©rarchie';                'ğŸ¯ Version simplifiÃ©e qui contourne les erreurs de type Firebase';