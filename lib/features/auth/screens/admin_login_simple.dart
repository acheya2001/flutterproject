import 'package:flutter/material.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../services/agent_test_data_service.dart';import '../../admin/screens/hierarchy_initialization_screen.dart';  final _emailController = TextEditingController(text: 'constat.tunisie.app@gmail.com';  final _passwordController = TextEditingController(text: 'Acheya123';      debugPrint('🎯 [ADMIN_SIMPLE] Début connexion...';        debugPrint('🎯 [ADMIN_SIMPLE] Déjà connecté, navigation directe...';      debugPrint('🎯 [ADMIN_SIMPLE] Tentative de connexion...';          debugPrint('🎯 [ADMIN_SIMPLE] Tentative $retryCount/$maxRetries...';            debugPrint('🎯 [ADMIN_SIMPLE] Connexion réussie: ${user.uid}';            throw Exception('Utilisateur non connecté après authentification';          debugPrint('🎯 [ADMIN_SIMPLE] Erreur auth tentative $retryCount: $authError';          if (authError.toString().contains('Connection reset by peer';              authError.toString().contains('I/O error';              authError.toString().contains('network';              debugPrint('🎯 [ADMIN_SIMPLE] Erreur réseau, retry dans 2s...';          if (authError.toString().contains('type cast';              authError.toString().contains('subtype';              authError.toString().contains('PigeonUserDetails';            debugPrint('🎯 [ADMIN_SIMPLE] Erreur de type détectée, vérification utilisateur...';              debugPrint('🎯 [ADMIN_SIMPLE] Utilisateur connecté malgré erreur, navigation...';          // Si dernière tentative, propager l';      debugPrint('🎯 [ADMIN_SIMPLE] Erreur finale: $e';            content: Text('❌ Erreur: $e';  /// 🚨 Connexion d';      debugPrint('🚨 [ADMIN_SIMPLE] Connexion d\'urgence activée...';      if (_emailController.text.trim() == 'constat.tunisie.app@gmail.com';          _passwordController.text == 'Acheya123';        debugPrint('🚨 [ADMIN_SIMPLE] Identifiants valides, navigation directe...';              content: Text('🚨 Connexion d\'urgence réussie';        throw Exception('Identifiants incorrects';      debugPrint('🚨 [ADMIN_SIMPLE] Erreur connexion d\'urgence: $e';            content: Text('❌ Erreur: $e';    debugPrint('🎯 [ADMIN_SIMPLE] Navigation vers admin...';      Navigator.pushReplacementNamed(context, '/admin/home';      debugPrint('🎯 [ADMIN_SIMPLE] Navigation terminée';  /// 🧪 Créer les données de test pour l';      debugPrint('🧪 [ADMIN_SIMPLE] Création données test agent...';              title: const Text('✅ Données de test créées';                  const Text('Identifiants de connexion agent :';                  SelectableText('Email: ${credentials['email']}';                  SelectableText('Mot de passe: ${credentials['password']}';                    'Utilisez ces identifiants pour vous connecter en tant qu\'agent d\'assurance.';                  child: const Text('OK';              content: Text('✅ Données de test agent créées avec succès';      debugPrint('🧪 [ADMIN_SIMPLE] Données test créées avec succès';      debugPrint('🚨 [ADMIN_SIMPLE] Erreur création données test: $e';            content: Text('❌ Erreur: $e';        title: const Text('🎯 Admin Simple';              'Connexion Administrateur';                labelText: 'Email';                labelText: 'Mot de passe';                        'Se connecter';            // Bouton connexion d';                  '🚨 Connexion d\'urgence';                  '🧪 Créer données test agent';                label: const Text('🏢 Initialiser Hiérarchie';                '🎯 Version simplifiée qui contourne les erreurs de type Firebase';