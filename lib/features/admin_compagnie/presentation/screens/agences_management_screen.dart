import 'package:flutter/material.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../../services/permission_service.dart';import '../../services/agence_management_service.dart';import '../widgets/agence_card.dart';import '../widgets/agence_form_dialog.dart';import '../widgets/agence_detail_dialog.dart';  const Text(';  final ScrollController _scrollController = ScrollController(')')';  // √âtat de l';  String _searchQuery = ';  String? _statusFilter; // null = tous, 'actif', 'inactif';  String? _gouvernoratFilter = 'Tous';    'Tous', 'Tunis', 'Ariana', 'Ben Arous', 'Manouba', 'Nabeul', 'Zaghouan';    'Bizerte', 'Beja', 'Jendouba', 'Le Kef', 'Siliana', 'Kairouan';    'Kasserine', 'Sidi Bouzid', 'Sousse', 'Monastir', 'Mahdia', ';    super.dispose(';  /// üîç Charger les informations de l';          _error = ';      setState((';        _error = 'Erreur: ';    }';  /// üß™ Basculer l';        compagnieId: _adminInfo!['compagnieId';        compagnieNom: _adminInfo![';    if (result != null';          compagnieId: _adminInfo![';          ScaffoldMessenger.of(context';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (e';      builder: (context';        compagnieId: _adminInfo!['compagnieId';        compagnieNom: _adminInfo![';    if (result != null';          agenceId: agence[';          ScaffoldMessenger.of(context';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (e';  Future<void> _toggleAgenceStatus(Map<String, dynamic> agence';      await AgenceManagementService.toggleAgenceStatus(agence[';      if (mounted';        final newStatus = agence['status'] == 'actif' ? 'inactif' : ';        ScaffoldMessenger.of(context';            content: ({newStatus == 'actif' ? 'activee' : 'desactivee';        ScaffoldMessenger.of(context';            content: (e';    final isFakeData = agence[';      ScaffoldMessenger.of(context';          content: const Text(';      builder: (context')')';        title: const Text('üóëÔ∏è Supprimer l\')')'agence';        content: ({agence['nom']}" ?\n\n';          ';            onPressed: () => Navigator.pop(context, false';            child: const Text(';            style: ElevatedButton.styleFrom(backgroundColor: Colors.red')')';            child: const Text(';    if (confirmed == true')')';        await AgenceManagementService.deleteAgence(agence[';          ScaffoldMessenger.of(context';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (e';        appBar: AppBar(title: const Text(';              const SizedBox(height: 16')')';              const Text(_error ?? ';              const SizedBox(height: 16';                child: const Text(';          icon: const Icon(Icons.info')')';          tooltip: _includeTestData ? 'Masquer donnees de test' : ';          onPressed: () => setState((';          tooltip: ';      ';              hintText: ';                        _searchController.clear(';                        _onSearchChanged(';          const SizedBox(height: 12';                    labelText: ';                    border: OutlineInputBorder(borderRadius: BorderRadius.circular(8)';                    DropdownMenuItem(value: null, child: const Text('Tous)')')';                    DropdownMenuItem(value: 'actif', child: const Text('Actif)')')';                    DropdownMenuItem(value: 'inactif', child: const Text(';              const SizedBox(width: 12')')';                    labelText: ';  Widget _buildAgencesList(';        compagnieId: _adminInfo![';                const SizedBox(height: 16';                ({snapshot.error}';      icon: const Icon(Icons.info';      label: const Text(';')')