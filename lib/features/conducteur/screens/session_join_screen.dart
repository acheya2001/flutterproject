import 'package:flutter/material.dart';import 'package:provider/provider.dart';import '../../../core/widgets/custom_app_bar.dart';import '../../../core/widgets/custom_button.dart';import '../../../core/widgets/custom_text_field.dart';import '../../auth/providers/auth_provider.dart';import '../../constat/models/session_constat_model.dart';import '../../constat/providers/session_provider.dart';import 'conducteur_declaration_screen.dart';          content: Text('Veuillez saisir un code de session';        throw Exception('Utilisateur non connecté';      debugPrint('[SessionJoin] === TENTATIVE DE REJOINDRE SESSION ===';      debugPrint('[SessionJoin] Code: $sessionCode';      debugPrint('[SessionJoin] User: ${authProviderState.currentUser!.id}';                Text('Connexion à la session $sessionCode...';        throw Exception('Session non trouvée ou impossible de rejoindre.';      debugPrint('[SessionJoin] ✅ Session rejointe avec succès';        throw Exception('Position non trouvée dans la session';        throw Exception('Vous n\'êtes pas invité à cette session ou votre email/ID ne correspond pas.';          content: Text('✅ Connecté à la session en tant que conducteur $position';      // Naviguer vers l';          content: Text('Erreur: $e';        title: 'Rejoindre un Constat';                Text('Rejoindre un Constat';                Text('Saisissez le code de session pour participer au constat collaboratif';          const Text('Code de Session';          CustomTextField(controller: _sessionCodeController, label: 'Code de session', hintText: 'SESS_12345';        text: _isLoading ? 'Connexion...' : 'Rejoindre la Session';          Row(children: [ const Icon(Icons.help_outline, color: Color(0xFF6366F1), size: 20), const SizedBox(width: 8), Text('Besoin d\'aide ?';          Text('• Le code de session vous a été envoyé par email\n• Il commence généralement par "SESS_"\n• Vérifiez vos spams si vous ne trouvez pas l\'email\n• Contactez l\'autre conducteur si nécessaire';}