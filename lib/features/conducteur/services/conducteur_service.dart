import 'dart:io';import 'package:cloud_firestore/cloud_firestore.dart';import 'package:firebase_storage/firebase_storage.dart';import 'package:flutter/foundation.dart';import 'package:path/path.dart';import 'package:image/image.dart';import '../models/conducteur_model.dart';      debugPrint('[ConducteurService] Récupération de tous les conducteurs';          .collection('conducteurs';          .orderBy('nom';      debugPrint('[ConducteurService] ${conducteurs.length} conducteurs récupérés';      debugPrint('[ConducteurService] Erreur lors de la récupération des conducteurs: $e';      debugPrint('[ConducteurService] Récupération du conducteur: $conducteurId';          .collection('conducteurs';        debugPrint('[ConducteurService] Conducteur non trouvé';      debugPrint('[ConducteurService] Conducteur récupéré: ${conducteur.nom} ${conducteur.prenom}';      debugPrint('[ConducteurService] Erreur lors de la récupération du conducteur: $e';    debugPrint('[ConducteurService] Compression de l\'image: ${imageFile.path}';      debugPrint('[ConducteurService] Impossible de décoder l\'image';    // Redimensionner l';    // Compresser l';    // Créer un fichier temporaire pour l';    final tempFile = File('${tempDir.path}/compressed_${path.basename(imageFile.path)}';    debugPrint('[ConducteurService] Image compressée: ${tempFile.path}';    debugPrint('[ConducteurService] Taille originale: ${bytes.length} octets, taille compressée: ${compressedBytes.length} octets';      debugPrint('[ConducteurService] Ajout d\'un nouveau conducteur: ${conducteur.nom} ${conducteur.prenom}';      final docRef = _firestore.collection('conducteurs';      debugPrint('[ConducteurService] ID généré pour le conducteur: $conducteurId';        debugPrint('[ConducteurService] Compression et téléchargement de la photo du permis';        final permisRef = _storage.ref().child('conducteurs/$conducteurId/permis.jpg';        debugPrint('[ConducteurService] Photo du permis téléchargée: $urlPhotoPermis';        debugPrint('[ConducteurService] Compression et téléchargement de la photo de la CIN';        final cinRef = _storage.ref().child('conducteurs/$conducteurId/cin.jpg';        debugPrint('[ConducteurService] Photo de la CIN téléchargée: $urlPhotoCIN';      // Créer un nouveau conducteur avec l';      debugPrint('[ConducteurService] Conducteur enregistré dans Firestore';      debugPrint('[ConducteurService] Erreur lors de l\'ajout du conducteur: $e';        throw Exception('ID du conducteur non défini';      debugPrint('[ConducteurService] Mise à jour du conducteur: ${conducteur.id}';        debugPrint('[ConducteurService] Compression et téléchargement de la nouvelle photo du permis';        final permisRef = _storage.ref().child('conducteurs/${conducteur.id}/permis.jpg';        debugPrint('[ConducteurService] Nouvelle photo du permis téléchargée: $urlPhotoPermis';        debugPrint('[ConducteurService] Compression et téléchargement de la nouvelle photo de la CIN';        final cinRef = _storage.ref().child('conducteurs/${conducteur.id}/cin.jpg';        debugPrint('[ConducteurService] Nouvelle photo de la CIN téléchargée: $urlPhotoCIN';          .collection('conducteurs';      debugPrint('[ConducteurService] Conducteur mis à jour avec succès';      debugPrint('[ConducteurService] Erreur lors de la mise à jour du conducteur: $e';      debugPrint('[ConducteurService] Suppression du conducteur: $conducteurId';          .collection('conducteurs';      debugPrint('[ConducteurService] Conducteur supprimé avec succès';      debugPrint('[ConducteurService] Erreur lors de la suppression du conducteur: $e';  // Supprimer les photos d';      debugPrint('[ConducteurService] Suppression des photos du conducteur: $conducteurId';      final ref = _storage.ref().child('conducteurs/$conducteurId';          debugPrint('[ConducteurService] Photo supprimée: ${item.fullPath}';            debugPrint('[ConducteurService] Photo supprimée: ${item.fullPath}';        // Ignorer les erreurs si le dossier n';        debugPrint('[ConducteurService] Avertissement lors de la suppression des photos: $e';      debugPrint('[ConducteurService] Erreur lors de la suppression des photos: $e';}