import 'package:flutter/material.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../../../core/services/firebase_service.dart';import '../../../core/constants/app_constants.dart';import '../../../core/enums/app_enums.dart';import '../../../shared/models/user_model.dart';      debugPrint('[FIX_SUPER_ADMIN] 🔧 Correction du Super Admin...';      debugPrint('[FIX_SUPER_ADMIN] ✅ Super Admin corrigé avec succès !';      debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur lors de la correction: $e';      debugPrint('[FIX_SUPER_ADMIN] 🗑️ Suppression des Super Admins existants...';          .where('role';        debugPrint('[FIX_SUPER_ADMIN] 🗑️ Supprimé: ${doc.id}';      debugPrint('[FIX_SUPER_ADMIN] ✅ ${snapshot.docs.length} Super Admin(s) supprimé(s)';      debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur lors de la suppression: $e';      debugPrint('[FIX_SUPER_ADMIN] 🆕 Création d\'un nouveau Super Admin...';      const email = 'constat.tunisie.app@gmail.com';      const password = 'Acheya123';        // Essayer de se connecter d';        debugPrint('[FIX_SUPER_ADMIN] 📧 Compte Auth existant trouvé';          debugPrint('[FIX_SUPER_ADMIN] 📧 Nouveau compte Auth créé';          debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur création Auth: $createError';        throw Exception('Impossible de créer ou récupérer le compte Auth';        'id';        'email';        'firstName': 'Super';        'lastName': 'Admin';        'phone': '+216 70 000 000';        'role';        'status';        'createdAt';        'updatedAt';        'createdBy': 'SYSTEM';        'cin': 'SUPER_ADMIN';        'address': 'Tunis, Tunisie';        'permissions';        'metadata';      await userCredential.user!.updateDisplayName('Super Admin';      debugPrint('[FIX_SUPER_ADMIN] ✅ Super Admin créé avec l\'ID: $userId';      debugPrint('[FIX_SUPER_ADMIN] 📧 Email: $email';      debugPrint('[FIX_SUPER_ADMIN] 🔑 Mot de passe: $password';      debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur lors de la création: $e';      debugPrint('[FIX_SUPER_ADMIN] 🔍 Vérification du Super Admin...';          .where('role';        debugPrint('[FIX_SUPER_ADMIN] ❌ Aucun Super Admin trouvé';        debugPrint('[FIX_SUPER_ADMIN] ✅ Super Admin trouvé:';        debugPrint('[FIX_SUPER_ADMIN] 🆔 ID: ${doc.id}';        debugPrint('[FIX_SUPER_ADMIN] 📧 Email: ${data['email']}';        debugPrint('[FIX_SUPER_ADMIN] 👤 Nom: ${data['firstName']} ${data['lastName']}';        debugPrint('[FIX_SUPER_ADMIN] 🎭 Rôle: ${data['role']}';        debugPrint('[FIX_SUPER_ADMIN] 📊 Statut: ${data['status']}';      debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur lors de la vérification: $e';      debugPrint('[FIX_SUPER_ADMIN] 🧪 Test de connexion...';      const email = 'constat.tunisie.app@gmail.com';      const password = 'Acheya123';        debugPrint('[FIX_SUPER_ADMIN] ✅ Connexion Auth réussie';          debugPrint('[FIX_SUPER_ADMIN] ✅ Document Firestore trouvé';          debugPrint('[FIX_SUPER_ADMIN] 🎭 Rôle: ${data['role']}';            debugPrint('[FIX_SUPER_ADMIN] ✅ UserModel créé avec succès';            debugPrint('[FIX_SUPER_ADMIN] 👤 ${userModel.fullName}';            debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur UserModel: $e';          debugPrint('[FIX_SUPER_ADMIN] ❌ Document Firestore introuvable';      debugPrint('[FIX_SUPER_ADMIN] ❌ Erreur de connexion: $e';