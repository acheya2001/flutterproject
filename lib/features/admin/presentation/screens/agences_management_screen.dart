import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../../../../core/theme/modern_theme.dart';import '../../models/agence_assurance.dart';import '../../services/agence_service.dart';import '../../services/compagnie_service.dart';import '../widgets/agence_form_dialog.dart';import '../widgets/agence_details_dialog.dart';import '../widgets/delete_confirmation_dialog.dart';  final ScrollController _scrollController = ScrollController(';  // √âtat de l';  String _searchQuery = ';  // Stream pour les compagnies (mise a jour automatique';    'Tous';    'Tunis', 'Ariana', 'Ben Arous', 'Manouba';    'Nabeul', 'Zaghouan', 'Bizerte', 'Beja';    'Jendouba', 'Le Kef', 'Siliana', 'Kairouan';    'Kasserine', 'Sidi Bouzid', 'Sousse', 'Monastir';    'Mahdia', 'Sfax', 'Gafsa', 'Tozeur';    'Kebili', 'Gabes', 'Medenine', ';    super.initState(';    _selectedCompagnie = widget.compagnieId ?? 'Toutes';    _selectedGouvernorat = ';      _loadMoreAgences(';  /// üì• Charger plus d';      _searchQuery = ';      _selectedCompagnie = ';        compagnies: compagnies.where((c') => c['id'] != 'Toutes).toList(';        selectedCompagnieId: _selectedCompagnie != ';          ScaffoldMessenger.of(context';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (error';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (error';        title: 'Supprimer l\'agence';        content: '√ätes-vous s√ªr de vouloir supprimer l\'agence "'{agence.nom}" ?\n\n';                'Cette action peut √™tre annulee en restaurant l\';          ScaffoldMessenger.of(context';              content: const Text(';          ScaffoldMessenger.of(context')')';              content: (error';            content: const Text(';        ScaffoldMessenger.of(context')')';            content: (error';          ';          {'id': 'Toutes', 'nom': 'Toutes les compagnies', 'code': ';                onPressed: () => Scaffold.of(context).openDrawer(';                tooltip: ';                  }';                tooltip: _includeTestData ? 'Masquer donnees de test' : ';                onPressed: (';                  Navigator.pushNamed(context, ';                icon: const Icon(Icons.info';                tooltip: ';                onPressed: (';                  Navigator.pushNamed(context, ';                icon: const Icon(Icons.info';                tooltip: ';                icon: const Icon(Icons.info';                tooltip: ';          ';              hintText: ';                        _searchController.clear(';                        _onSearchChanged(';          ';                    labelText: ';                  items: compagnies.map((compagnie';                      value: compagnie[';              const SizedBox(width: 16';                    labelText: ';  Widget _buildAgencesList(';        compagnieId: _selectedCompagnie != 'Toutes';        gouvernorat: _selectedGouvernorat != ';    ';  /// üè™ Carte d';                      switch (action';                        case ';                          _editAgence(agence';                        case ';                          _deleteAgence(agence';                        case ';                          _restoreAgence(agence';                        case ';                            const SizedBox(width: 8';                            const Text(';                            const SizedBox(width: 8')')';                            const Text(';                  const SizedBox(width: 4')')';                    child: ({agence.gouvernorat}';                    Navigator.pushReplacementNamed(context, ';                ';                  title: ';                    Navigator.pop(context';                    Navigator.pushNamed(context, ';                ';                  title: ';                ';                  title: ';                    Navigator.pop(context';                    Navigator.pushNamed(context, ';                ';                  title: ';                    Navigator.pop(context';                    Navigator.pushNamed(context, ';                ';                  title: ';                ';                  title: 'Quitter l\';                    Navigator.pop(context';                    Navigator.pushReplacementNamed(context, '/login');