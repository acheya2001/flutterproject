import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import '../../models/agent_admin_model.dart';import '../../providers/admin_providers.dart';import ';  final _confirmPasswordController = TextEditingController(';  String _selectedStatut = ';    if (widget.agent != null';      _adresseController.text = agent.adresse ?? ';      _cinController.text = agent.cin ?? ';      } catch (e';        debugPrint(';            const SizedBox(height: 20';                      _buildSectionTitle(';                      const SizedBox(height: 12';                              label: ';                              validator: (value') => value?.isEmpty == true ? ';                          const SizedBox(width: 12';                              label: ';                              validator: (value') => value?.isEmpty == true ? ';                      const SizedBox(height: 16';                        label: ';                      const SizedBox(height: 16';                              label: ';                          const SizedBox(width: 12';                              label: ';                      const SizedBox(height: 16';                        label: ';                        const SizedBox(height: 24';                        _buildSectionTitle(';                        const SizedBox(height: 12';                          label: ';                        const SizedBox(height: 16';                          label: ';                      const SizedBox(height: 24';                      _buildSectionTitle(';                              const SizedBox(width: 8';                              (_generatedMatricule';                              label: ';                          const SizedBox(width: 12';                              label: ';                        controller: TextEditingController(text: _commission?.toString(') ?? ';                        label: ';                      const SizedBox(height: 24';                      _buildSectionTitle(';                      const SizedBox(height: 12';                        ';                      ';                        ';                      ';                        ';            const SizedBox(height: 20';            // Boutons d';                      ';    ';  /// ✉️ Valider l';    if (value?.isEmpty == true) return 'Email requis';    if (!RegExp(r^[\w-\.]+@([\w-]+\.')+[\w-]{2,4}').hasMatch(value!)';      return 'Format d\';    if (value?.isEmpty == true') return 'Telephone requis';    final cleanPhone = value!.replaceAll(RegExp(r[\s\-\(\')]'), ';    if (!RegExp(r'^[2-9]\d{7}').hasMatch(cleanPhone)';      return ';    if (value?.isEmpty == true') return ';    if (value!.length < 6') return ';    if (value?.isEmpty == true') return ';    if (value != _passwordController.text') return ';    if (_generatedMatricule == null';      _showError(';    setState(() => _isLoading = true';      // Obtenir les informations de l';        _showError('Agence non trouvee';      // Creer l';        id: widget.agent?.id ?? ';        userId: widget.agent?.userId ?? ';    } catch (e';      _showError(';    if (_peutCreerContrats') permissions.add(';    if (_peutValiderSinistres') permissions.add(';    if (_peutGererClients') permissions.add(';