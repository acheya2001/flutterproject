import 'package:flutter/material.dart';import '../../models/compagnie_assurance.dart';import '../../services/compagnie_service.dart';import ';  final CompagnieService _compagnieService = CompagnieService(';  String _selectedGouvernorat = ';    'Ariana', 'Beja', 'Ben Arous', 'Bizerte', 'Gabes', 'Gafsa';    'Jendouba', 'Kairouan', 'Kasserine', 'Kebili', 'Le Kef';    'Mahdia', 'La Manouba', 'Medenine', 'Monastir', 'Nabeul';    'Sfax', 'Sidi Bouzid', 'Siliana', 'Sousse', 'Tataouine';    'Tozeur', 'Tunis', ';  void _initializeControllers(';    _nomController = TextEditingController(text: compagnie?.nom ?? ';    _codeController = TextEditingController(text: compagnie?.code ?? ';    _adresseController = TextEditingController(text: compagnie?.adresseSiege ?? ';    _villeController = TextEditingController(text: compagnie?.ville ?? ';    _emailController = TextEditingController(text: compagnie?.email ?? ';    _telephoneController = TextEditingController(text: compagnie?.telephone ?? ';    _faxController = TextEditingController(text: ';    _siteWebController = TextEditingController(text: compagnie?.siteWeb ?? ';    _descriptionController = TextEditingController(text: ';    _selectedGouvernorat = compagnie?.gouvernorat ?? ';      _nomController.addListener(_generateCodeFromName';  /// Generer l';      _errors['nom'] = ';    if (_codeController.text.trim().isEmpty';      _errors['code'] = ';    } else if (_codeController.text.trim().length < 2';      _errors['code'] = ';    if (_adresseController.text.trim().isEmpty';      _errors['adresse'] = 'L\';    if (_villeController.text.trim().isEmpty';      _errors['ville'] = ';    if (_selectedGouvernorat.isEmpty';      _errors['gouvernorat'] = ';    if (_emailController.text.trim().isNotEmpty';      final emailRegex = RegExp(r'^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}';      if (!emailRegex.hasMatch(_emailController.text.trim()';        _errors['email'] = 'Format d\';    if (_telephoneController.text.trim().isNotEmpty';      final phoneRegex = RegExp(r'^\+?[0-9\s\-\(\)]{8,}';      if (!phoneRegex.hasMatch(_telephoneController.text.trim()';        _errors['telephone'] = ';    if (_siteWebController.text.trim().isNotEmpty';      final urlRegex = RegExp(r';      if (!urlRegex.hasMatch(_siteWebController.text.trim()';        _errors['siteWeb'] = 'L\'URL doit commencer par http:// ou https://';    // Verifier l';    if (_errors[';      if (!isUnique';        _errors['code'] = ';    }';        id: widget.compagnie?.id ?? ';      ScaffoldMessenger.of(context';          content: (e';                        label: 'Nom de la compagnie *';                        error: _errors[';                      const SizedBox(height: 16';                        label: widget.compagnie == null ? 'Identifiant (genere automatiquement)' : 'Identifiant *';                        error: _errors[';                      const SizedBox(height: 16';                        label: 'Adresse du siege *';                        error: _errors[';                      const SizedBox(height: 16';                              label: 'Ville *';                              error: _errors[';                      const SizedBox(height: 16';                        label: 'Email';                        error: _errors[';                      const SizedBox(height: 16';                        label: 'Telephone';                        error: _errors[';                      const SizedBox(height: 16';                        label: 'Site web';                        error: _errors[';                      if (isEditing';                          title: const Text('Compagnie active')')';                          subtitle: const Text(_isActive ? 'Activee' : ';            const SizedBox(height: 24';            // Boutons d';                    child: const Text(';                          ')')';                        : const Text(isEditing ? 'Modifier' : ';  Widget _buildGouvernoratDropdown(';            labelText: ';            ';            errorText: _errors[';            setState((';              _selectedGouvernorat = value ?? ';