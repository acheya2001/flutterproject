import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import 'admin_stats_card.dart';import 'admin_chart_widget.dart';import ';    switch (userRole';      case 'super_admin';        title = 'ðŸ“Š Metriques Globales';        subtitle = 'Vue d\'ensemble de tout le systeme';      case 'admin_compagnie';        title = 'ðŸ“Š Metriques de la Compagnie';        subtitle = 'Performance de votre compagnie';      case 'admin_agence';        title = 'ðŸ“Š Metriques de l\'Agence';        subtitle = 'Performance de votre agence';        title = 'ðŸ“Š Metriques';        subtitle = ';      data: (stats';            title: _getStatsTitle('users';            value: stats['users]?.toString(') ?? ';            color: const Color(0xFF3B82F6';            trend: _calculateTrend(stats[';          ';            title: _getStatsTitle('contracts';            value: stats['contracts]?.toString(') ?? ';            color: const Color(0xFF10B981';            trend: _calculateTrend(stats[';          ';            title: _getStatsTitle('sinistres';            value: stats['sinistres]?.toString(') ?? ';            color: const Color(0xFFEF4444';            trend: _calculateTrend(stats[';          ';            title: _getStatsTitle('revenue';            value: _formatRevenue(stats[';            color: const Color(0xFFF59E0B';            trend: _calculateTrend(stats[';        const SizedBox(height: 16';              title: 'Ã‰volution des Contrats';              subtitle: ';            ';              title: 'Sinistres par Type';              subtitle: ';            ';              title: 'Performance Agents';              subtitle: ';            ';              title: 'Chiffre d\'Affaires';              subtitle: ';    ';  /// ðŸ“‹ Item d';          activity['icon';          color: activity[';  AsyncValue<Map<String, dynamic>> _getStatsProvider(WidgetRef ref';    if (userRole == ';      return ref.watch(globalStatsProvider';    } else if (userRole == ';      return ref.watch(compagnieStatsProvider(compagnieId!)';    } else if (userRole == ';    switch (key';      case 'users';        return userRole == 'super_admin' ? 'Utilisateurs' : 'Agents';      case 'contracts';        return 'Contrats';      case 'sinistres';        return 'Sinistres';      case 'revenue';        return CA (DT')';    if (revenue == null) return ';    final value = revenue is int ? revenue : (revenue as double).toInt(';    return '';  List<ChartData> _generateContractsData(';      const ChartData(label: 'Lun, value: 12';      const ChartData(label: 'Mar, value: 19';      const ChartData(label: 'Mer, value: 15';      const ChartData(label: 'Jeu, value: 25';      const ChartData(label: 'Ven, value: 22';      const ChartData(label: 'Sam, value: 18';      const ChartData(label: ';  List<ChartData> _generateSinistresData(';      const ChartData(label: 'Collision, value: 45';      const ChartData(label: 'Vol, value: 25';      const ChartData(label: 'Incendie, value: 15';      const ChartData(label: ';  List<ChartData> _generateAgentsData(';      const ChartData(label: 'Ahmed, value: 85';      const ChartData(label: 'Fatma, value: 78';      const ChartData(label: 'Mohamed, value: 72';      const ChartData(label: 'Leila, value: 68';      const ChartData(label: ';  List<ChartData> _generateRevenueData(';      const ChartData(label: 'Jan, value: 120';      const ChartData(label: 'Fev, value: 135';      const ChartData(label: 'Mar, value: 148';      const ChartData(label: 'Avr, value: 162';      const ChartData(label: 'Mai, value: 155';      const ChartData(label: ';  List<Map<String, dynamic>> _getActivityData(';        'icon';        'color: const Color(0xFF10B981';        'title': 'Nouvel agent inscrit';        'subtitle': 'Ahmed Ben Ali - Agence Tunis Centre';        'time': 'Il y a 5 min';        'icon';        'color: const Color(0xFF3B82F6';        'title': 'Nouveau contrat cree';        'subtitle': 'Contrat #CT-2024-001234';        'time': 'Il y a 12 min';        'icon';        'color: const Color(0xFFEF4444';        'title': 'Sinistre declare';        'subtitle': 'Accident route Sfax-Tunis';        'time': 'Il y a 25 min';        'icon';        'color: const Color(0xFF10B981';        'title': 'Expert assigne';        'subtitle': 'Sinistre #SIN-2024-5678';        'time': 'Il y a 1h';        'icon';        'color: const Color(0xFFF59E0B';        'title': 'Paiement recu';        'subtitle': '2,500 DT - Prime mensuelle';        'time': ';