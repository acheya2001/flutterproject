import 'package:flutter/material.dart';import '../../services/user_management_service_original.dart';  final _addressController = TextEditingController(';    {'value': 'admin_compagnie', 'label': 'Administrateur de Compagnie';    {'value': 'admin_agence', 'label': 'Administrateur d\'Agence';    {'value': 'agent_agence', 'label': 'Agent d\'Agence';    {'value': 'expert_auto', 'label': 'Expert Automobile';    {'value': 'conducteur', 'label': ';    super.dispose(';  /// 📝 Creer l';        case ';          if (_selectedCompagnie == null';            throw Exception(';            prenom: _prenomController.text.trim(';            role: ';          ';        case ';          if (_selectedCompagnie == null || _selectedAgence == null';            throw Exception(';            prenom: _prenomController.text.trim(';            role: ';          ';        case ';          if (_selectedCompagnie == null || _selectedAgence == null';            throw Exception(';            prenom: _prenomController.text.trim(';            role: ';          ';          throw Exception('Type d\'utilisateur non supporte: '_selectedRole';      if (result[';        ScaffoldMessenger.of(context';            content: const Text(';        widget.onUserCreated(')')';        throw Exception(result['error'] ?? ';      ScaffoldMessenger.of(context';          content: (e';        .where((agence) => agence[';  bool _requiresCompagnie(';    return _selectedRole != null && _selectedRole != ';  bool _requiresAgence(';    return _selectedRole == 'admin_agence' || _selectedRole == ';            const SizedBox(height: 16';                      labelText: ';                      if (value == null || value.trim().isEmpty';                        return ';                const SizedBox(width: 16';                      labelText: ';                      if (value == null || value.trim().isEmpty';                        return ';            const SizedBox(height: 16';                labelText: ';                if (value == null || value.trim().isEmpty';                  return 'Email requis';                if (!RegExp(r^[\w-\.]+@([\w-]+\.')+[\w-]{2,4}').hasMatch(value)';                  return ';            const SizedBox(height: 16';                labelText: ';                if (value == null || value.isEmpty';                  return ';                if (value.length < 6';                  return ';            const SizedBox(height: 16';                      labelText: ';                const SizedBox(width: 16';                      labelText: ';            const SizedBox(height: 16';                labelText: ';              items: _roles.map((role';                value: role['value';                child: const Text(role[';                if (value == null';                  return ';              const SizedBox(height: 16';                  labelText: ';                items: widget.compagnies.map((compagnie';                  value: compagnie['id';                  child: const Text(compagnie['nom'] ?? ';                  if (_requiresCompagnie() && value == null';                    return ';              const SizedBox(height: 16';                  labelText: ';                items: _getFilteredAgences().map((agence';                  value: agence['id';                  child: const Text(agence['nom'] ?? ';                  if (_requiresAgence() && value == null';                    return ';                  onPressed: _isLoading ? null : () => Navigator.of(context).pop(';                  child: const Text(';                        ')')';                      : const Text(';')')