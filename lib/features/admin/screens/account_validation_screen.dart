import 'package:flutter/material.dart';import 'package:flutter_riverpod/flutter_riverpod.dart';import '../../../core/widgets/custom_app_bar.dart';import '../../auth/models/notification_model.dart';import '../../auth/services/notification_service.dart';import '../../auth/models/user_model.dart';  String _selectedFilter = 'pending';        title: 'Validation des Comptes';          _buildFilterChip('pending', 'En attente';          _buildFilterChip('approved', 'Approuv√©s';          _buildFilterChip('rejected', 'Rejet√©s';      stream: _selectedFilter == 'pending';                Text('Erreur: ${snapshot.error}';                  child: const Text('R√©essayer';                  'Aucune demande ${_getStatusLabel(_selectedFilter)}';                          '${request.prenom} ${request.nom}';              if (request.userType == 'assureur';                _buildInfoRow(Icons.business, 'Compagnie', request.compagnie ?? '';                _buildInfoRow(Icons.badge, 'Matricule', request.matricule ?? '';                _buildInfoRow(Icons.location_city, 'Gouvernorat', request.gouvernorat ?? '';              if (request.userType == 'expert';                _buildInfoRow(Icons.business_center, 'Cabinet', request.cabinet ?? '';                _buildInfoRow(Icons.verified, 'Agr√©ment', request.agrement ?? '';                      label: const Text('Rejeter';                      label: const Text('Approuver';            '$label: ';              value.isEmpty ? 'Non renseign√©';        text = 'En attente';        text = 'Approuv√©';        text = 'Rejet√©';        text = 'Inconnu';      case 'assureur';      case 'expert';      case 'assureur';      case 'expert';      case 'pending';        return 'en attente';      case 'approved';        return 'approuv√©es';      case 'rejected';        return 'rejet√©es';        return '';    return '${date.day}/${date.month}/${date.year} √† ${date.hour}:${date.minute.toString().padLeft(2, '0')}';  /// üìÑ Afficher les d√©tails d';                            '${request.prenom} ${request.nom}';                            request.userType == 'assureur' ? 'Agent d\'Assurance' : 'Expert';                      _buildDetailSection('üìß Contact';                        _buildDetailRow('Email';                        _buildDetailRow('T√©l√©phone';                        _buildDetailRow('Adresse', request.adresse ?? 'Non renseign√©e';                      if (request.userType == 'assureur';                        _buildDetailSection('üè¢ Informations Assurance';                          _buildDetailRow('Compagnie', request.compagnie ?? '';                          _buildDetailRow('Matricule', request.matricule ?? '';                          _buildDetailRow('Gouvernorat', request.gouvernorat ?? '';                          _buildDetailRow('Agence pr√©f√©r√©e', request.agencePreferee ?? 'Aucune pr√©f√©rence';                      if (request.userType == 'expert';                        _buildDetailSection('üîç Informations Expert';                          _buildDetailRow('Cabinet', request.cabinet ?? '';                          _buildDetailRow('Agr√©ment', request.agrement ?? '';                          _buildDetailRow('Sp√©cialit√©s', request.specialites ?? 'Non renseign√©es';                        _buildDetailSection('üí¨ Lettre de motivation';                      _buildDetailSection('üìä Statut';                              'Demande cr√©√©e le ${_formatDate(request.createdAt)}';                          label: const Text('Rejeter';                          label: const Text('Approuver';              '$label:';              value.isEmpty ? 'Non renseign√©';          title: const Text('Approuver la demande';            '√ätes-vous s√ªr de vouloir approuver la demande de ${request.prenom} ${request.nom} ?';              child: const Text('Annuler';              child: const Text('Approuver';          approvedBy: 'admin', // TODO: R√©cup√©rer l'ID de l';              content: Text('Demande approuv√©e avec succ√®s';            content: Text('Erreur lors de l\'approbation: $e';          title: const Text('Rejeter la demande';              Text('Demande de ${request.prenom} ${request.nom}';                'Raison du rejet:';                  hintText: 'Expliquez pourquoi cette demande est rejet√©e...';              child: const Text('Annuler';                    'confirmed';                    'reason';              child: const Text('Rejeter';      if (result != null && result['confirmed';          rejectedBy: 'admin', // TODO: R√©cup√©rer l'ID de l';          reason: result['reason';              content: Text('Demande rejet√©e';            content: Text('Erreur lors du rejet: $e';    // Pour l';