import 'package:flutter/material.dart';import 'package:firebase_auth/firebase_auth.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../../auth/services/notification_service.dart';import 'admin_demandes_screen.dart';import '../utils/create_test_demande.dart';import 'admin_hierarchy_setup_screen.dart';          .collection('professional_account_requests';          .where('status', isEqualTo: 'pending';      stats['Demandes en attente';      final users = await _firestore.collection('users';      stats['Total utilisateurs';        final userType = doc.data()['userType';          case 'conducteur';          case 'assureur';          case 'expert';      stats['Conducteurs';      stats['Assureurs';      stats['Experts';      final contracts = await _firestore.collection('contracts';      stats['Contrats';      final constats = await _firestore.collection('constats';      stats['Constats';      debugPrint('Erreur chargement stats: $e';        title: const Text('ğŸ¯ Administration';                Navigator.of(context).pushNamedAndRemoveUntil('/user-type-selection';                        'Tableau de Bord Admin';                    'ConnectÃ© en tant que: ${user?.email ?? "Admin"}';                      'âœ… Connexion admin rÃ©ussie ! Le systÃ¨me fonctionne parfaitement.';              'Actions Administrateur';                            title: 'Demandes d\'Inscription';                            title: 'Actualiser';                            title: 'CrÃ©er Test';                            title: 'Constats';                            title: 'Config HiÃ©rarchie';  /// ğŸ”˜ Bouton d';      case 'Demandes en attente';      case 'Total utilisateurs';      case 'Conducteurs';      case 'Assureurs';      case 'Experts';      case 'Contrats';      case 'Constats';      case 'Demandes en attente';      case 'Total utilisateurs';      case 'Conducteurs';      case 'Assureurs';      case 'Experts';      case 'Contrats';      case 'Constats';          .collection('professional_account_requests';          .where('status', isEqualTo: 'pending';          title: const Text('ğŸ“‹ Demandes en attente';                ? const Center(child: Text('Aucune demande en attente';                        title: Text('${data['prenom']} ${data['nom']}';                        subtitle: Text('${data['userType']} - ${data['email']}';              child: const Text('Fermer';        SnackBar(content: Text('Erreur: $e';      print('ğŸ” DEBUG: Approbation demande $requestId...';          .collection('professional_account_requests';        'status': 'approved';        'reviewedAt';        'reviewedBy': 'admin';      print('âœ… DEBUG: Statut mis Ã  jour, envoi notification...';          approvedBy: 'admin';        print('âœ… DEBUG: Notification envoyÃ©e';        print('âŒ DEBUG: Erreur notification: $notifError';            content: Text('âœ… Demande approuvÃ©e et email envoyÃ©';      print('âŒ DEBUG: Erreur approbation: $e';            content: Text('Erreur: $e';        title: const Text('Raison du rejet';            hintText: 'Expliquez pourquoi la demande est rejetÃ©e...';            child: const Text('Annuler';            child: const Text('Rejeter';      print('ğŸ” DEBUG: Rejet demande $requestId avec raison: $reason';          .collection('professional_account_requests';        'status': 'rejected';        'rejectionReason';        'reviewedAt';        'reviewedBy': 'admin';      print('âœ… DEBUG: Statut mis Ã  jour, envoi notification de rejet...';          rejectedBy: 'admin';        print('âœ… DEBUG: Notification de rejet envoyÃ©e';        print('âŒ DEBUG: Erreur notification rejet: $notifError';            content: Text('âŒ Demande rejetÃ©e et email envoyÃ©';      print('âŒ DEBUG: Erreur rejet: $e';            content: Text('Erreur: $e';      const SnackBar(content: Text('ğŸ¯ Gestion utilisateurs - En dÃ©veloppement';      const SnackBar(content: Text('ğŸ¯ Gestion constats - En dÃ©veloppement';            content: Text('âœ… Demandes de test crÃ©Ã©es ! VÃ©rifiez l\'onglet "Demandes d\'Inscription"';            content: Text('âŒ Erreur: $e';