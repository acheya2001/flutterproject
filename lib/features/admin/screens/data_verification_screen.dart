import 'package:flutter/material.dart';import 'package:cloud_firestore/cloud_firestore.dart';import '../../../core/utils/constants.dart';import '../widgets/firebase_console_widget.dart';        title: const Text('ğŸ” VÃ©rification des DonnÃ©es';  /// âŒ Ã‰tat d';              'Erreur de chargement';              label: const Text('RÃ©essayer';        sum + (stat is Map && stat.containsKey('count') ? stat['count';                        'Base de DonnÃ©es Firebase';                        'DerniÃ¨re vÃ©rification: ${DateTime.now().toString().substring(0, 19)}';                    '$totalRecords enregistrements';              'âœ… Base de donnÃ©es opÃ©rationnelle avec ${_stats.length} collections actives';          'ğŸ“Š Statistiques par Collection';    final count = stats['count';    final lastUpdated = stats['lastUpdated';    final samples = stats['samples';      case 'vehicules_assures';        description = 'VÃ©hicules avec contrats d\'assurance';      case 'constats';        description = 'DÃ©clarations d\'accident';      case 'assureurs_compagnies';        description = 'Compagnies d\'assurance';      case 'analytics';        description = 'DonnÃ©es de Business Intelligence';        description = 'Collection de donnÃ©es';                'DerniÃ¨re MAJ: ${lastUpdated.toString().substring(0, 19)}';                '$count';            const Text('docs';          'ğŸ” Ã‰chantillons de DonnÃ©es';        ..._stats.entries.where((e) => e.value is Map && e.value['samples';            .map((entry) => _buildSampleCard(entry.key, entry.value['samples';        title: Text('Ã‰chantillon: $collection';        subtitle: Text('${samples.length} exemples disponibles';                  'Premier enregistrement:';                      fontFamily: 'monospace';          'ğŸ§ª Actions de Test';                label: const Text('Tester RequÃªtes';                label: const Text('Exporter Ã‰chantillon';        'assureurs_compagnies';            'count';            'lastUpdated';            'samples';              'id';          stats[collection]['count';            'count';            'error';            'lastUpdated';            'samples';  /// ğŸ“‹ Afficher les dÃ©tails d';        title: Text('ğŸ“Š DÃ©tails: $collection';              _buildDetailRow('Nombre de documents', '${stats['count']}';              _buildDetailRow('DerniÃ¨re vÃ©rification';                  stats['lastUpdated']?.toString().substring(0, 19) ?? 'N/A';              _buildDetailRow('Ã‰chantillons disponibles';                  '${(stats['samples'] as List?)?.length ?? 0}';              if (stats['error';                _buildDetailRow('Erreur', stats['error';            child: const Text('Fermer';              '$label:';      if (key != 'id';        buffer.writeln('$key: ${_formatValue(value)}';      return '{...}';      return '[${value.length} items]';            Text('Test des requÃªtes en cours...';          .where('statut', isEqualTo: 'actif';          .orderBy('created_at';          title: const Text('âœ… Tests RÃ©ussis';            'Toutes les requÃªtes fonctionnent correctement !\n\n';            'â€¢ VÃ©hicules actifs: ${vehiculesActifs.size} trouvÃ©(s)\n';            'â€¢ Constats rÃ©cents: ${constatsRecents.size} trouvÃ©(s)\n';            'â€¢ RÃ¨gles de sÃ©curitÃ©: OK\n';            'â€¢ Index Firestore: OK';              child: const Text('Parfait !';          title: const Text('âŒ Erreur de Test';          content: Text('Erreur lors du test des requÃªtes:\n\n$e';              child: const Text('Fermer';        content: Text('ğŸ“¤ FonctionnalitÃ© d\'export en dÃ©veloppement';