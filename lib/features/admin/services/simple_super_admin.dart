import 'package:firebase_auth/firebase_auth.dart';import 'package:cloud_firestore/cloud_firestore.dart';import 'package:flutter/material.dart';import '../../../core/services/firebase_service.dart';import '../../../core/constants/app_constants.dart';    debugPrint('[SUPER_ADMIN_MODE] 🔐 Mode Super Admin ACTIVÉ';    debugPrint('[SUPER_ADMIN_MODE] 🔓 Mode Super Admin DÉSACTIVÉ';  static const String SUPER_ADMIN_EMAIL = 'constat.tunisie.app@gmail.com';  static const String SUPER_ADMIN_PASSWORD = 'Acheya123';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔐 Vérification du Super Admin...';        debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Super Admin existe déjà et fonctionne !';        debugPrint('[SIMPLE_SUPER_ADMIN] 🆔 UID: ${userCredential.user!.uid}';        debugPrint('[SIMPLE_SUPER_ADMIN] 📧 Email: $SUPER_ADMIN_EMAIL';        debugPrint('[SIMPLE_SUPER_ADMIN] ⚠️ Compte n\'existe pas, création...';        // Créer le compte seulement s'il n';          debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Nouveau Super Admin créé !';          debugPrint('[SIMPLE_SUPER_ADMIN] 🆔 UID: ${userCredential.user!.uid}';          debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur création: $createError';          // Si l'erreur est "email-already-in-use", c';          if (createError.toString().contains('email-already-in-use';            debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Compte existe déjà (normal)';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur lors de la création: $e';  /// 🧹 Nettoyer l';      debugPrint('[SIMPLE_SUPER_ADMIN] 🧹 Nettoyage état Firebase Auth...';      // Attendre que l';      debugPrint('[SIMPLE_SUPER_ADMIN] ✅ État Firebase Auth nettoyé';      debugPrint('[SIMPLE_SUPER_ADMIN] ⚠️ Erreur nettoyage: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔐 === DÉBUT CONNEXION ===';      debugPrint('[SIMPLE_SUPER_ADMIN] 📧 Email: ${email ?? SUPER_ADMIN_EMAIL}';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔑 Password: ${password != null ? '***' : 'DEFAULT'}';      // NETTOYER L'ÉTAT FIREBASE AUTH D';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔥 Appel Firebase Auth...';      debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Firebase Auth réussi !';      debugPrint('[SIMPLE_SUPER_ADMIN] 🆔 UID: ${userCredential.user!.uid}';      debugPrint('[SIMPLE_SUPER_ADMIN] 📧 Email: ${userCredential.user!.email}';      debugPrint('[SIMPLE_SUPER_ADMIN] 🕐 Créé: ${userCredential.user!.metadata.creationTime}';      debugPrint('[SIMPLE_SUPER_ADMIN] 🎯 Retour UserCredential...';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ ERREUR DÉTAILLÉE: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 📍 STACK TRACE: $stackTrace';      SuperAdminMode.deactivate(); // Désactiver en cas d';      // Si c'est l';      if (e.toString().contains('PigeonUserDetails';        debugPrint('[SIMPLE_SUPER_ADMIN] 🔄 Tentative de récupération...';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔄 === TENTATIVE DE RÉCUPÉRATION ===';      // Vérifier si l';        debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Utilisateur déjà connecté après erreur';        debugPrint('[SIMPLE_SUPER_ADMIN] ⚠️ Impossible de créer UserCredential, mais utilisateur connecté';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Récupération échouée';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur récupération: $e';          'id';          'email';          'firstName': 'Super';          'lastName': 'Admin';          'phone': '+216 70 000 000';          'role': 'super_admin';          'status': 'active';          'createdBy': 'SYSTEM';          'cin': 'SUPER_ADMIN';          'address': 'Tunis, Tunisie';      debugPrint('[SIMPLE_SUPER_ADMIN] Erreur lors de la récupération: $e';      // Vérification simple basée sur l';      debugPrint('[SIMPLE_SUPER_ADMIN] Erreur lors de la vérification: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 🗑️ Suppression des Super Admins...';          .where('role', isEqualTo: 'super_admin';        debugPrint('[SIMPLE_SUPER_ADMIN] 🗑️ Supprimé: ${doc.id}';      debugPrint('[SIMPLE_SUPER_ADMIN] ✅ ${snapshot.docs.length} Super Admin(s) supprimé(s)';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur lors de la suppression: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 🧹 Nettoyage du compte existant...';        debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Compte existant supprimé';        debugPrint('[SIMPLE_SUPER_ADMIN] ⚠️ Pas de compte existant à supprimer: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur lors du nettoyage: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 🔄 Reset complet du Super Admin...';      debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Reset terminé !';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur lors du reset: $e';      debugPrint('[SIMPLE_SUPER_ADMIN] 🧪 Test de connexion...';        debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Test réussi !';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Test échoué: $e';        debugPrint('[SIMPLE_SUPER_ADMIN] ✅ Super Admin trouvé:';        debugPrint('[SIMPLE_SUPER_ADMIN] 📧 Email: ${info['email']}';        debugPrint('[SIMPLE_SUPER_ADMIN] 👤 Nom: ${info['firstName']} ${info['lastName']}';        debugPrint('[SIMPLE_SUPER_ADMIN] 🆔 ID: ${info['id']}';        debugPrint('[SIMPLE_SUPER_ADMIN] 🎭 Rôle: ${info['role']}';        debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Aucun Super Admin trouvé';      debugPrint('[SIMPLE_SUPER_ADMIN] ❌ Erreur: $e';