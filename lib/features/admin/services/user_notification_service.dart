import 'package:flutter/foundation.dart';import 'package:cloud_firestore/cloud_firestore.dart';  /// ‚úÖ Notification d';  }';        type: 'user_approved';        title: 'Compte approuve';        message: 'Votre compte a ete approuve par l\'administrateur. Vous pouvez maintenant vous connecter.';          'approvedBy';          ';      // Envoyer un email (si configure';        subject: 'Compte approuve - Constat Tunisie';        template: 'user_approved';          'userName';          'approvedBy': approvedBy ?? ';      ';      debugPrint('[UserNotificationService] ‚úÖ Notification d\'approbation envoyee a ';    } catch (e';      debugPrint('[UserNotificationService] ‚ùå Erreur notification approbation:  + e.toString()';  /// üö´ Notification de desactivation d';        type: 'user_disabled';        title: 'Compte desactive';        message: reason ?? 'Votre compte a ete temporairement desactive par l\'administrateur.';          'disabledBy';          'disabledAt: FieldValue.serverTimestamp(';          ';      ';        subject: 'Compte desactive - Constat Tunisie';        template: 'user_disabled';          'userName';          'disabledBy': disabledBy ?? 'Administrateur';          'reason': reason ?? ';      ';      debugPrint('[UserNotificationService] üö´ Notification de desactivation envoyee a ';    } catch (e';      debugPrint('[UserNotificationService] ‚ùå Erreur notification desactivation:  + e.toString()';  /// üîÑ Notification de reactivation d';        type: 'user_enabled';        title: 'Compte reactive';        message: 'Votre compte a ete reactive. Vous pouvez maintenant vous connecter.';          'enabledBy';          ';      ';        subject: 'Compte reactive - Constat Tunisie';        template: 'user_enabled';          'userName';          'enabledBy': enabledBy ?? ';      ';      debugPrint('[UserNotificationService] üîÑ Notification de reactivation envoyee a ';    } catch (e';      debugPrint('[UserNotificationService] ‚ùå Erreur notification reactivation:  + e.toString()';  /// üóëÔ∏è Notification de suppression d';        type: 'user_deleted';        title: 'Compte supprime';        message: 'Votre compte a ete supprime par l\'administrateur.';          'deletedBy';          ';      ';        subject: 'Compte supprime - Constat Tunisie';        template: 'user_deleted';          'userName';          'deletedBy': deletedBy ?? ';      ';      debugPrint('[UserNotificationService] üóëÔ∏è Notification de suppression envoyee a ';    } catch (e';      debugPrint(';  }';      String message = 'Vos affectations ont ete mises a jour par l\';      if (newCompagnie != null';        message += '\nNouvelle compagnie: ';      if (newAgence != null';        message += '\nNouvelle agence: 'newAgence';        type: 'user_assignment_changed';        title: 'Affectation mise a jour';          'changedBy';          'changedAt: FieldValue.serverTimestamp(';          'newCompagnie';          ';      ';        subject: 'Affectation mise a jour - Constat Tunisie';        template: 'user_assignment_changed';          'userName';          'changedBy': changedBy ?? 'Administrateur';          'newCompagnie': newCompagnie ?? 'Non specifiee';          'newAgence': newAgence ?? ';      ';      debugPrint('[UserNotificationService] üè¢ Notification de changement d\'affectation envoyee a ';    } catch (e';      debugPrint(';  }';      await _firestore.collection('notifications';        'userId';        'type';        'title';        'message';        'data';        'read';        'createdAt: FieldValue.serverTimestamp(';        ';    } catch (e';      debugPrint(';  }';      // TODO: Implementer l'envoi d';      // Pour l'instant, on simule l';      debugPrint('[UserNotificationService] üìß Email simule:';      debugPrint('  - √Ä: 'to';      debugPrint('  - Sujet: 'subject';      debugPrint('  - Template: 'template';      debugPrint('  - Donnees: 'data';      // ou un autre service d';      debugPrint('[UserNotificationService] ‚ùå Erreur envoi email:  + e.toString()';  /// üìä Notification d';        subject: 'Export de donnees - Constat Tunisie';        template: 'data_export';          'adminName';          'exportType';          'fileName';          'recordCount';          ';      ';      debugPrint('[UserNotificationService] üìä Notification d\'export envoyee a ';    } catch (e';      debugPrint('[UserNotificationService] ‚ùå Erreur notification export:  + e.toString()';  /// üîî Obtenir les notifications d';        .collection('notifications';        .where('userId, isEqualTo: userId';        .orderBy(';        final data = doc.data(';        data[';  static Future<void> markNotificationAsRead(String notificationId';          .collection(';          .doc(notificationId';          .update({'read': true, ';    } catch (e';      debugPrint(';  static Future<void> deleteNotification(String notificationId';      await _firestore.collection(';    } catch (e';      debugPrint('[UserNotificationService] ‚ùå Erreur suppression notification: ';