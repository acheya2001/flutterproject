import 'dart:io';import 'package:flutter/material.dart';import 'package:image_picker/image_picker.dart';// import 'package:speech_to_text/speech_to_text.dart';import '../models/accident_analysis_model.dart';import '../services/offline_ai_service.dart';/// 🤖 Widget d'analyse IA d';  String _voiceDescription = '';  /// 🔍 Vérifier si l';    debugPrint('[AI] Reconnaissance vocale temporairement désactivée';  /// 📋 Afficher l';                  'Analyse IA Existante';                  label: Text('${(_existingAnalysis!.reconstruction.confidence * 100).toInt()}% confiance';            // Résumé de l';            // Boutons d';                    label: const Text('Voir la reconstitution';                    label: const Text('Détails';  /// ➕ Interface de création d';                  'Analyse IA de l\'accident';              'Ajoutez des photos et une description pour générer automatiquement un croquis et une reconstitution vidéo.';            // Bouton d';          '📸 Photos de l\'accident';  /// ➕ Bouton d';            Text('Ajouter photo';          '📝 Description de l\'accident';            hintText: 'Décrivez comment l\'accident s\'est produit...';                label: Text(_isListening ? 'Arrêter' : 'Description vocale';              '✅ Enregistrement vocal ajouté';  /// 🚀 Bouton d';        label: Text(_isAnalyzing ? 'Analyse en cours...' : 'Générer l\'analyse IA';  // Méthodes d';      'Écoute en cours...';      'J\'ai entendu un bruit de freinage...';      'Il y a eu une collision à l\'intersection...';      'Deux véhicules sont impliqués dans l\'accident...';      'Le véhicule blanc roulait vers le nord...';      'Le véhicule noir arrivait de la droite...';      'L\'impact s\'est produit côté conducteur...';      'Les dégâts semblent importants à l\'avant...';      'Collision à l\'intersection entre véhicule blanc et noir, impact latéral, dégâts importants à l\'avant des deux véhicules, freinage d\'urgence visible.';      if (!_isListening) break; // Arrêt si l';    debugPrint('[AI] Simulation reconnaissance vocale terminée: $_voiceDescription';            content: Text('✅ Analyse IA terminée avec succès !';            content: Text('❌ Erreur lors de l\'analyse: $e';  // Méthodes d';        Text('🚗 ${analysis.imageAnalysis.vehicleCount} véhicules détectés';        Text('💥 ${analysis.imageAnalysis.damages.length} zones de dégâts';        Text('📍 Impact: ${analysis.imageAnalysis.impact.direction}';          Text('📝 Description: ${analysis.description.originalText.substring(0, 50)}...';    // Démarrer l';                      'Reconstitution IA - Accident';              // Informations de l';    // TODO: Implémenter l';        title: const Text('Analyse détaillée';        content: const Text('Fonctionnalité en cours de développement';            child: const Text('OK';                      'Reconstitution 3D - IA Avancée';                        'LIVE';                '0:${(_animationController.value * 15).toInt().toString().padLeft(2, '0')}';                '0:15';                'Détails de la reconstitution';              _buildInfoChip('Véhicules', '${analysis.imageAnalysis.vehicleCount}';              _buildInfoChip('Confiance', '${(analysis.reconstruction.confidence * 100).toInt()}%';              _buildInfoChip('Durée', '15s';        '$label: $value';/// 🎨 Painter pour l';    // Point d';