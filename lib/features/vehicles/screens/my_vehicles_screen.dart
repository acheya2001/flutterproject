import 'package:flutter/material.dart';import 'package:firebase_auth/firebase_auth.dart';import '../../insurance/services/contract_service.dart';  final String conducteurId = FirebaseAuth.instance.currentUser?.uid ?? '';          'ğŸš— Mes VÃ©hicules';    final assurance = vehicle['assurance';    final isInsured = assurance != null && assurance['status'] == 'active';                        vehicle['immatriculation'] ?? 'N/A';                        '${vehicle['marque'] ?? ''} ${vehicle['modele'] ?? ''}';                _buildDetailRow('ğŸ¨ Couleur', vehicle['couleur'] ?? 'Non spÃ©cifiÃ©e';                _buildDetailRow('ğŸ“… AnnÃ©e', vehicle['annee']?.toString() ?? 'N/A';                _buildDetailRow('âš¡ Ã‰nergie', vehicle['energie'] ?? 'N/A';                _buildDetailRow('ğŸ”§ Puissance', '${vehicle['puissance'] ?? 'N/A'} CV';                'Assurance Active';          _buildDetailRow('ğŸ¢ Compagnie', assurance['compagnie'] ?? 'N/A';          _buildDetailRow('ğŸ“‹ Contrat', assurance['numeroContrat'] ?? 'N/A';          _buildDetailRow('ğŸª Agence', assurance['agence'] ?? 'N/A';          _buildDetailRow('ğŸ‘¤ Agent', assurance['agent'] ?? 'N/A';          _buildDetailRow('ğŸ“… Expire le', _formatDate(assurance['dateFin';                      'Votre assurance expire bientÃ´t ! Contactez votre agent.';  /// ğŸ¯ Boutons d';            label: const Text('Voir les dÃ©tails';              label: const Text('Contacter';      text = 'Non assurÃ©';      text = 'Expire bientÃ´t';      text = 'AssurÃ©';  /// âŒ Ã‰tat d';            'Erreur de chargement';            'Impossible de charger vos vÃ©hicules';            label: const Text('RÃ©essayer';            'Aucun vÃ©hicule assurÃ©';            'Vos vÃ©hicules assurÃ©s apparaÃ®tront ici';                  'Comment obtenir une assurance ?';                  'Contactez un agent d\'assurance qui crÃ©era un contrat pour votre vÃ©hicule. Vous recevrez une notification une fois le contrat activÃ©.';    if (assurance == null || assurance['dateFin';      final endDate = assurance['dateFin';    if (timestamp == null) return 'N/A';      return '${date.day.toString().padLeft(2, '0')}/${date.month.toString().padLeft(2, '0')}/${date.year}';      return 'N/A';        title: Text('DÃ©tails - ${vehicle['immatriculation']}';              _buildInfoSection('ğŸš— VÃ©hicule';                'Immatriculation: ${vehicle['immatriculation'] ?? 'N/A'}';                'Marque: ${vehicle['marque'] ?? 'N/A'}';                'ModÃ¨le: ${vehicle['modele'] ?? 'N/A'}';                'AnnÃ©e: ${vehicle['annee']?.toString() ?? 'N/A'}';                'Couleur: ${vehicle['couleur'] ?? 'N/A'}';                'Ã‰nergie: ${vehicle['energie'] ?? 'N/A'}';                'Puissance: ${vehicle['puissance']?.toString() ?? 'N/A'} CV';                'Usage: ${vehicle['usage'] ?? 'N/A'}';              if (vehicle['assurance';                _buildInfoSection('ğŸ›¡ï¸ Assurance';                  'Compagnie: ${vehicle['assurance']['compagnie'] ?? 'N/A'}';                  'Contrat: ${vehicle['assurance']['numeroContrat'] ?? 'N/A'}';                  'Agence: ${vehicle['assurance']['agence'] ?? 'N/A'}';                  'Agent: ${vehicle['assurance']['agent'] ?? 'N/A'}';                  'DÃ©but: ${_formatDate(vehicle['assurance']['dateDebut'])}';                  'Fin: ${_formatDate(vehicle['assurance']['dateFin'])}';                  'Statut: ${vehicle['assurance']['status'] ?? 'N/A'}';            child: const Text('Fermer';            'â€¢ $item';    final assurance = vehicle['assurance';        title: const Text('Contacter l\'agent';              'Agent: ${assurance['agent'] ?? 'N/A'}';            Text('Agence: ${assurance['agence'] ?? 'N/A'}';            Text('Compagnie: ${assurance['compagnie'] ?? 'N/A'}';              'Vous pouvez contacter votre agent pour:';            const Text('â€¢ Renouveler votre contrat';            const Text('â€¢ Modifier vos garanties';            const Text('â€¢ DÃ©clarer un sinistre';            const Text('â€¢ Poser des questions';            child: const Text('Fermer';              // TODO: ImplÃ©menter l'appel ou l'envoi d';                  content: Text('FonctionnalitÃ© de contact Ã  implÃ©menter';            label: const Text('Appeler';